{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../src/app.ts","webpack:///../src/createComponent.tsx","webpack:///../src/vdom-my.ts","webpack:///../src/web-component.ts","webpack:///../src/decorator.ts","webpack:///../src/directive.ts","webpack:///../src/component.ts","webpack:///../src/router.ts","webpack:///../src/apprun.ts","webpack:///../src/vdom.ts","webpack:///./node_modules/marked/src/helpers.js","webpack:///./node_modules/marked/src/defaults.js","webpack:///./node_modules/marked/src/marked.js","webpack:///./node_modules/marked/src/Renderer.js","webpack:///./node_modules/marked/src/rules.js","webpack:///./node_modules/marked/src/Slugger.js","webpack:///./node_modules/marked/src/InlineLexer.js","webpack:///./node_modules/marked/src/TextRenderer.js","webpack:////webpack/universalModuleDefinition","webpack:////webpack/bootstrap","webpack:////src/app.ts","webpack:////src/createComponent.tsx","webpack:////src/vdom-my.ts","webpack:////src/web-component.ts","webpack:////src/decorator.ts","webpack:////src/directive.ts","webpack:////src/component.ts","webpack:////src/router.ts","webpack:////src/apprun.ts","webpack:////src/vdom.ts","webpack:////src/_site/index.tsx","webpack:////src/_site/router.tsx","webpack:////(webpack)/buildin/global.js","webpack:///./src/layout/style.scss","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/marked/src/Lexer.js","webpack:///./node_modules/marked/src/Parser.js","webpack:///./src/_lib/about_md.tsx","webpack:///./src/_lib/contact_tsx.tsx","webpack:///./src/_lib/home_tsx.tsx","webpack:///./src/_lib/index_tsx.tsx","webpack:///./src/_lib/README_md.tsx","webpack:///./src/_lib/signin_tsx.tsx","webpack:///./src/_lib/_404/index_tsx.tsx","webpack:///./src/_lib/index.tsx","webpack:///./src/components/counter.tsx","webpack:///./src/components/my-xkcd.tsx","webpack:///./src/components/header.tsx","webpack:///./src/fetch.ts","webpack:///./src/api.ts","webpack:///./src/components/article-list.tsx","webpack:///./src/components/page-list.tsx","webpack:///./src/components/home.tsx","webpack:///./src/components/error-list.tsx","webpack:///./src/components/signin.tsx","webpack:///./src/components/register.tsx","webpack:///./src/components/profile.tsx","webpack:///./src/components/modal.tsx","webpack:///./src/components/settings.tsx","webpack:///./src/components/editor.tsx","webpack:///./src/components/comment-list.tsx","webpack:///./src/components/article-meta.tsx","webpack:///./src/components/article.tsx","webpack:///./src/index.tsx","webpack:///./src/layout/index.tsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","App","[object Object]","this","_events","fn","options","push","subscribers","filter","sub","args","console","assert","length","once","forEach","delay","apply","on","_t","clearTimeout","setTimeout","app","root","self","global","_idx","collect","children","ch","Array","isArray","keyCache","updateElement","element","nodes","parent","createComponent","node","idx","map","child","vdom","tag","getPrototypeOf","__isAppRunComponent","props","id","Date","now","__componentCache","component","mount","state","mounted","new_state","Promise","render","el","setState","ref","e","_view","renderState","updateChildren","update","key1","nodeName","key2","toUpperCase","updateProps","parentNode","replaceChild","len","Math","min","childNodes","HTMLElement","insertBefore","textContent","nodeType","createText","old","appendChild","removeChild","lastChild","document","createDocumentFragment","indexOf","div","createElement","insertAdjacentHTML","substring","createTextNode","isSvg","SVGElement","JSON","stringify","createElementNS","cached","oldProps","newProps","keys","style","cssText","startsWith","cname","replace","match","dataset","getAttribute","setAttribute","removeAttribute","window","requestAnimationFrame","customElement","componentClass","super","_component","observedAttributes","isConnected","opts","_shadowRoot","shadow","attachShadow","from","attributes","item","parentElement","run","unload","unmount","customElements","define","Reflect","meta","WeakMap","metadataKey","metadataValue","target","has","set","events","toString","defineMetadata","constructor","webComponent","getStateValue","setStateValue","componentCache","components","REFRESH","Component","view","_history_idx","_history","history","h","event","handler","type","checked","Number","multiple","selected","html","getElementById","tracking_attr","tracking_id","valueOf","MutationObserver","observer","changes","oldValue","body","contains","disconnect","observe","childList","subtree","attributeOldValue","attributeFilter","rendered","then","catch","err","error","_state","enable_history","callback","global_event","prev","_history_prev","next","_history_next","add_actions","_global_events","action","newState","actions","getMetadataKeys","getMetadata","all","act","split","trim","add_action","is_global_event","_app","_actions","off","route","url","rest","_","Error","Fragment","start","model","NOOP","addEventListener","onpopstate","location","hash","escapeTest","escapeReplace","escapeTestNoEncode","escapeReplaceNoEncode","escapeReplacements","getEscapeReplacement","unescapeTest","unescape","toLowerCase","charAt","String","fromCharCode","parseInt","caret","nonWordAndColonTest","originIndependentUrl","baseUrls","justDomain","protocol","domain","resolveUrl","base","href","test","rtrim","relativeBase","str","invert","suffLen","currChar","substr","escape","encode","edit","regex","opt","source","obj","val","getRegex","RegExp","cleanUrl","sanitize","prot","decodeURIComponent","encodeURI","noopTest","exec","merge","arguments","splitCells","tableRow","count","cells","offset","escaped","curr","splice","findClosingBracket","b","level","checkSanitizeDeprecation","silent","warn","getDefaults","baseUrl","breaks","gfm","headerIds","headerPrefix","highlight","langPrefix","mangle","pedantic","renderer","sanitizer","smartLists","smartypants","xhtml","defaults","changeDefaults","newDefaults","Lexer","Parser","Renderer","TextRenderer","InlineLexer","Slugger","marked","src","tokens","pending","lex","done","out","parse","token","text","lang","code","message","setOptions","parser","lexer","inlineLexer","output","infostring","quote","raw","slugger","slug","ordered","header","content","flags","align","title","block","newline","fences","hr","heading","blockquote","list","def","nptable","table","lheading","_paragraph","_label","_title","bullet","_tag","_comment","paragraph","normal","inline","autolink","link","reflink","nolink","strong","em","br","del","_punctuation","_escapes","_scheme","_email","_attribute","_href","_extended_email","_backpedal","seen","originalSlug","links","rules","cap","prevCapZero","inLink","inRawBlock","lastParenIndex","linkLen","slice","outputLink","escapes","codespan","charCodeAt","image","random","ATTR_PROPS","directive","removedNodes","config","nav","pages","eventRoot","sort","a","preventDefault","params","pathname","onclick","linkClick","menu","origin","pushState","layout","assign","Comp","g","Function","top","loose","bull","listStart","listItems","space","isordered","istask","ischecked","lastToken","trimRight","codeBlockStyle","depth","join","undefined","task","pre","inlineText","reverse","tok","pop","peek","row","cell","j","tablecell","tablerow","nextToken","checkbox","parseText","listitem","errMsg","log","default_1","decorators","desc","getOwnPropertyDescriptor","decorate","__decorate","__awaiter","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","rejected","result","loading","comic","response","fetch","json","user","class","username","setUser","access_token","localStorage","getItem","setToken","setItem","removeItem","fetchAsync","method","headers","defaultBasePath","status","ok","post","put","toQueryString","parts","encodeURIComponent","serializeObject","form","elements","field","tempvalue","tags","auth","request","article","comment","commentId","Article","favClass","favorited","author","updatedAt","toLocaleString","favoritesCount","description","tagList","current","_a","reload","following","profile","articles","max","fill","page","Tag","floor","updateState","limit","feed","articlesCount","errors","updateArticle","onsubmit","placeholder","login","messages","returnTo","logout","signIn","session","register","submitRegistration","bio","profileResult","articleResult","updateFollow","cancel","onOK","onCancel","role","showModal","rows","email","password","settings","submitSettings","showModel","submitArticle","Comment","createdAt","comments","ArticleMeta","followClass","deleting","_comments","newComment","commentsResponse","deleteComment","editArticle","deleteArticle","okDelete","cancelDelete","ownArticle","dot","ps","owned","site","sidebar","markdown","version","xmlns","width","height"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","import { EventOptions} from './types'\nexport class App {\n\n  private _events: Object;\n\n  public start;\n  public createElement;\n  public render;\n  public Fragment;\n  public webComponent;\n\n  constructor() {\n    this._events = {};\n  }\n\n  on(name: string, fn: (...args) => void, options: EventOptions = {}): void {\n    this._events[name] = this._events[name] || [];\n    this._events[name].push({ fn, options });\n  }\n\n  off(name: string, fn: (...args) => void): void {\n    const subscribers = this._events[name] || [];\n    \n    this._events[name] = subscribers.filter((sub) => sub.fn !== fn);\n  }\n\n  find(name: string): any {\n    return this._events[name];\n  }\n\n  run(name: string, ...args): number {\n    let subscribers = this._events[name] || [];\n\n    console.assert(subscribers && subscribers.length > 0, 'No subscriber for event: ' + name);\n\n    // Update the list of subscribers by pulling out those which will run once.\n    // We must do this update prior to running any of the events in case they\n    // cause additional events to be turned off or on.\n    this._events[name] = subscribers.filter((sub) => {\n      return !sub.options.once;\n    });\n\n    subscribers.forEach((sub) => {\n      const { fn, options } = sub;\n      if (options.delay) {\n        this.delay(name, fn, args, options);\n      } else {\n        fn.apply(this, args);\n      }\n      return !sub.options.once;\n    });\n\n    return subscribers.length;\n  }\n\n  once(name: string, fn, options: EventOptions = {}): void {\n    this.on(name, fn, { ...options, once: true });\n  }\n\n  private delay(name, fn, args, options): void {\n    if (options._t) clearTimeout(options._t);\n    options._t = setTimeout(() => {\n      clearTimeout(options._t);\n      fn.apply(this, args);\n    }, options.delay);\n  }\n}\n\nconst AppRunVersions = 'AppRun-2';\nlet app: App;\nconst root = (typeof self === 'object' && self.self === self && self) ||\n  (typeof global === 'object' && global.global === global && global)\nif (root['app'] && root['_AppRunVersions']) {\n  app = root['app'];\n} else {\n  app = new App();\n  root['app'] = app;\n  root['_AppRunVersions'] = AppRunVersions;\n}\nexport default app;\n","import app from './app';\n\nfunction render(node, parent, idx) {\n  const { tag, props, children } = node;\n  let key = `_${idx}`;\n  let id = props && props['id'];\n  if (!id) id = `_${idx}${Date.now()}`;\n  else key = id;\n  if (!parent.__componentCache) parent.__componentCache = {};\n  let component = parent.__componentCache[key];\n  if (!component) {\n    component = parent.__componentCache[key] = new tag({ ...props, children }).mount(id);\n    component['__eid'] = id;\n  } else {\n    id = component['__eid'];\n  }\n  let state = component.state;\n  if (component.mounted) {\n    const new_state = component.mounted(props, children, state);\n    if (typeof new_state !== 'undefined') state = component.state = new_state;\n  }\n  if (state instanceof Promise) {\n    const render = el => {\n      component.element = el;\n      component.setState(state);\n    }\n    return <section {...props} id={id} ref={e => render(e)}></section>;\n  }\n  else {\n    const vdom = component._view(state, props);\n    const render = el => {\n      component.element = el;\n      component.renderState(state, vdom);\n    }\n    return <section {...props} id={id} ref={e => render(e)}>{vdom}</section>;\n  }\n}\n\nlet _idx = 0;\nexport default function createComponent(node, parent, idx = 0) {\n  if (idx === 0) _idx = 0;\n  if (typeof node === 'string') return node;\n  if (Array.isArray(node)) return node.map(child => createComponent(child, parent, _idx));\n  let vdom = node;\n  if (node && typeof node.tag === 'function' && Object.getPrototypeOf(node.tag).__isAppRunComponent)\n    vdom = render(node, parent, _idx++);\n  if (vdom && Array.isArray(vdom.children))\n    vdom.children = vdom.children.map(child => createComponent(child, parent, _idx));\n  return vdom;\n}\n","import createComponent from './createComponent';\nimport { VDOM, VNode } from './types';\nexport type Element = any; //HTMLElement | SVGSVGElement | SVGElement;\n\nconst ATTR_PROPS = '_props';\n\nfunction collect(children) {\n  const ch = [];\n  const push = (c) => {\n    if (c !== null && c !== undefined && c !== '' && c !== false) {\n      ch.push((typeof c === 'function' || typeof c === 'object') ? c : `${c}`);\n    }\n  }\n  children && children.forEach(c => {\n    if (Array.isArray(c)) {\n      c.forEach(i => push(i));\n    } else {\n      push(c);\n    }\n  });\n  return ch;\n}\n\nexport function createElement(tag: string | Function | [], props?: {}, ...children) {\n  const ch = collect(children);\n  if (typeof tag === 'string') return { tag, props, children: ch };\n  else if (Array.isArray(tag)) return tag; // JSX fragments - babel\n  else if (tag === undefined && children) return ch; // JSX fragments - typescript\n  else if (Object.getPrototypeOf(tag).__isAppRunComponent) return { tag, props, children: ch } // createComponent(tag, { ...props, children });\n  else if (typeof tag === 'function') return tag(props, ch);\n  else throw new Error(`Unknown tag in vdom ${tag}`);\n};\n\nconst keyCache = {};\n\nexport const updateElement = render;\n\nexport function render(element: Element, nodes: VDOM, parent = {}) {\n  // console.log('render', element, node);\n  // tslint:disable-next-line\n  if (nodes == null || nodes === false) return;\n\n  nodes = createComponent(nodes, parent);\n\n  if (!element) return;\n  if (Array.isArray(nodes)) {\n    updateChildren(element, nodes);\n  } else {\n    updateChildren(element, [nodes]);\n  }\n}\n\nfunction same(el: Element, node: VNode) {\n  // if (!el || !node) return false;\n  const key1 = el.nodeName;\n  const key2 = `${node.tag || ''}`;\n  return key1.toUpperCase() === key2.toUpperCase();\n}\n\nfunction update(element: Element, node: VNode) {\n  console.assert(!!element);\n  //console.log('update', element, node);\n  if (!same(element, node)) {\n    element.parentNode.replaceChild(create(node), element);\n    return;\n  }\n  updateChildren(element, node.children);\n  updateProps(element, node.props);\n}\n\nfunction updateChildren(element, children) {\n  const len = Math.min(element.childNodes.length, children.length);\n  for (let i = 0; i < len; i++) {\n    const child = children[i];\n    const el = element.childNodes[i];\n    if (child instanceof HTMLElement) {\n      element.insertBefore(child, el);\n    }\n    else if (typeof child === 'string') {\n      if (el.textContent !== child) {\n        if (el.nodeType === 3) {\n          el.textContent = child\n        } else {\n          element.replaceChild(createText(child), el);\n        }\n      }\n    } else {\n      const key = child.props && child.props['key'];\n      if (key) {\n        if (el.key === key) {\n          update(element.childNodes[i], child);\n        } else {\n          const old = keyCache[key];\n          if (old) {\n            element.insertBefore(old, el);\n            element.appendChild(el);\n            update(element.childNodes[i], child);\n          } else {\n            element.insertBefore(create(child), el);\n          }\n        }\n      } else {\n        update(element.childNodes[i], child);\n      }\n    }\n  }\n\n  let n = element.childNodes.length;\n  while (n > len) {\n    element.removeChild(element.lastChild);\n    n--;\n  }\n\n  if (children.length > len) {\n    const d = document.createDocumentFragment();\n    for (let i = len; i < children.length; i++) {\n      d.appendChild(create(children[i]));\n    }\n    element.appendChild(d);\n  }\n}\n\nfunction createText(node) {\n  if (node.indexOf('_html:') === 0) { // ?\n    const div = document.createElement('div');\n    div.insertAdjacentHTML('afterbegin', node.substring(6))\n    return div;\n  } else {\n    return document.createTextNode(node);\n  }\n}\n\nfunction create(node: VNode | string | HTMLElement | SVGElement, isSvg = false): Element {\n  console.assert(node !== null && node !== undefined);\n  // console.log('create', node, typeof node);\n  if ((node instanceof HTMLElement) || (node instanceof SVGElement)) return node;\n  if (typeof node === \"string\") return createText(node);\n  if (!node.tag || (typeof node.tag === 'function')) return createText(JSON.stringify(node));\n  isSvg = isSvg || node.tag === \"svg\";\n  const element = isSvg\n    ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag)\n    : document.createElement(node.tag);\n\n  updateProps(element, node.props);\n\n  if (node.children) node.children.forEach(child => element.appendChild(create(child, isSvg)));\n\n  return element\n}\n\nfunction mergeProps(oldProps: {}, newProps: {}): {} {\n  newProps['class'] = newProps['class'] || newProps['className'];\n  delete newProps['className'];\n  const props = {};\n  if (oldProps) Object.keys(oldProps).forEach(p => props[p] = null);\n  if (newProps) Object.keys(newProps).forEach(p => props[p] = newProps[p]);\n  return props;\n}\n\nfunction updateProps(element: Element, props: {}) {\n  console.assert(!!element);\n  // console.log('updateProps', element, props);\n  const cached = element[ATTR_PROPS] || {};\n  props = mergeProps(cached, props || {});\n  element[ATTR_PROPS] = props;\n  for (const name in props) {\n    const value = props[name];\n    // if (cached[name] === value) continue;\n    // console.log('updateProps', name, value);\n    if (name === 'style') {\n      if (element.style.cssText) element.style.cssText = '';\n      for (const s in value) {\n        if (element.style[s] !== value[s]) element.style[s] = value[s];\n      }\n    } else if (name.startsWith('data-')) {\n      const dname = name.substring(5);\n      const cname = dname.replace(/-(\\w)/g, (match) => match[1].toUpperCase());\n      if (element.dataset[cname] !== value) {\n        if (value || value === \"\") element.dataset[cname] = value;\n        else delete element.dataset[cname];\n      }\n    } else if (name === 'id' || name === 'class' || name.startsWith(\"role\") || name.indexOf(\"-\") > 0 ||\n      element instanceof SVGElement) {\n      if (element.getAttribute(name) !== value) {\n        if (value) element.setAttribute(name, value);\n        else element.removeAttribute(name);\n      }\n    } else if (element[name] !== value) {\n        element[name] = value;\n    }\n    if (name === 'key' && value) keyCache[value] = element;\n  }\n  if (props && typeof props['ref'] === 'function') {\n    window.requestAnimationFrame(()=>props['ref'](element));\n  }\n}\n\nexport function Fragment(props, ...children): any[] {\n  return collect(children);\n}","declare var customElements;\n\nexport type CustomElementOptions = {\n  render?, shadow?, history?, global_event?: boolean;\n  observedAttributes?: string[]\n};\n\nexport const customElement = (componentClass, options: CustomElementOptions = {}) => class extends HTMLElement {\n  private _shadowRoot;\n  private _component;\n  public on;\n  public run;\n  constructor() {\n    super();\n  }\n  get component() { return this._component; }\n  get state() { return this._component.state; }\n\n  static get observedAttributes() {\n    return { ...options }['observedAttributes'];\n  }\n\n  connectedCallback() {\n    if (this.isConnected && !this._component) {\n      const opts = options || {};\n      this._shadowRoot = opts.shadow ? this.attachShadow({ mode: 'open' }) : this;\n      const props = {}\n      Array.from(this.attributes).forEach(item => props[item.name] = item.value);\n      const children = this.children ? Array.from(this.children) : [];\n      children.forEach(el => el.parentElement.removeChild(el));\n      this._component = new componentClass({ ...props, children }).mount(this._shadowRoot, opts);\n      if (this._component.mounted) {\n        const new_state = this._component.mounted(props, children, this._component.state);\n        if (typeof new_state !== 'undefined') this._component.state = new_state;\n      }\n      this.on = this._component.on.bind(this._component);\n      this.run = this._component.run.bind(this._component);\n      if (!(opts.render===false)) this._component.run('.');\n    }\n  }\n\n  disconnectedCallback() {\n    this._component.unload && this._component.unload();\n    this._component.unmount();\n    this._component = null;\n  }\n\n  attributeChangedCallback(...args) {\n    this._component && this._component.run('attributeChanged', ...args);\n  }\n}\n\nexport default (name: string, componentClass, options?: CustomElementOptions) => {\n  (typeof customElements !== 'undefined') && customElements.define(name, customElement(componentClass, options))\n}","import webComponent, { CustomElementOptions } from './web-component';\n\n// tslint:disable:no-invalid-this\nexport const Reflect = {\n\n  meta: new WeakMap(),\n\n  defineMetadata(metadataKey, metadataValue, target) {\n    if (!this.meta.has(target)) this.meta.set(target, {});\n    this.meta.get(target)[metadataKey] = metadataValue;\n  },\n\n  getMetadataKeys(target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? Object.keys(this.meta.get(target)) : [];\n  },\n\n  getMetadata(metadataKey, target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? this.meta.get(target)[metadataKey] : null;\n  }\n}\n\nexport function update<E=string>(events?: E, options: any = {}) {\n  return (target: any, key: string, descriptor: any) => {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target);\n    return descriptor;\n  }\n}\n\nexport function on<E>(events?: E, options: any = {}) {\n  return function (target: any, key: string) {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target)\n  }\n}\n\nexport function customElement(name: string, options?: CustomElementOptions) {\n  return function _customElement<T extends { new(...args: any[]): {} }>(constructor: T) {\n    webComponent(name, constructor, options);\n    return constructor;\n  }\n}\n\n","import app from './app';\n\nconst getStateValue = (component, name) => {\n  return (name ? component['state'][name] : component['state']) || '';\n}\n\nconst setStateValue = (component, name, value) => {\n  if (name) {\n    const state = { ...component['state'] };\n    state[name] = value;\n    component.setState(state);\n  } else {\n    component.setState(value);\n  }\n}\n\nexport default (key: string, props: [], tag, component) => {\n  if (key.startsWith('$on')) {\n    const event = props[key];\n    key = key.substring(1)\n    if (typeof event === 'boolean') {\n      props[key] = e => component.run(key, e);\n    } else if (typeof event === 'string') {\n      props[key] = e => component.run(event, e);\n    } else if (typeof event === 'function') {\n      props[key] = e => component.setState(event(component.state, e));\n    } else if (Array.isArray(event)) {\n      const [handler, ...p] = event;\n      if (typeof handler === 'string') {\n        props[key] = e => component.run(handler, ...p, e);\n      } else if (typeof handler === 'function') {\n        props[key] = e => component.setState(handler(component.state, ...p, e));\n      }\n    }\n\n  } else if (key === '$bind') {\n    const type = props['type'] || 'text';\n    const name = typeof props[key] === 'string' ? props[key] : props['name'];\n    if (tag === 'input') {\n      switch (type) {\n        case 'checkbox':\n          props['checked'] = getStateValue(component, name);\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.checked);\n          break;\n        case 'radio':\n          props['checked'] = getStateValue(component, name) === props['value'];\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.value);\n          break;\n        case 'number':\n        case 'range':\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, Number(e.target.value));\n          break;\n        default:\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n      }\n    } else if (tag === 'select') {\n      props['value'] = getStateValue(component, name);\n      props['onchange'] = e => {\n        if (!e.target.multiple) { // multiple selection use $bind on option\n          setStateValue(component, name || e.target.name, e.target.value);\n        }\n      }\n    } else if (tag === 'option') {\n      props['selected'] = getStateValue(component, name);\n      props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.selected);\n    }\n  } else {\n    app.run('$', { key, tag, props, component });\n  }\n}","\r\nimport app, { App } from './app';\r\nimport { Reflect } from './decorator'\r\nimport { View, Update, ActionDef, ActionOptions } from './types';\r\nimport directive from './directive';\r\n\r\nconst componentCache = {};\r\napp.on('get-components', o => o.components = componentCache);\r\n\r\nconst REFRESH = state => state;\r\n\r\nexport class Component<T=any, E=any> {\r\n  static __isAppRunComponent = true;\r\n  private _app = new App();\r\n  private _actions = [];\r\n  private _global_events = [];\r\n  private _state;\r\n  private _history = [];\r\n  private _history_idx = -1;\r\n  private enable_history;\r\n  private global_event;\r\n  public element;\r\n  public rendered;\r\n  public mounted;\r\n  public unload;\r\n  private tracking_id;\r\n  private observer;\r\n\r\n  render(element: HTMLElement, node) {\r\n    app.render(element, node, this);\r\n  }\r\n\r\n  private _view(state, p = null) {\r\n    if (!this.view) return;\r\n    const h = app.createElement;\r\n    app.createElement = (tag, props, ...children) => {\r\n      props && Object.keys(props).forEach(key => {\r\n        if (key.startsWith('$')) {\r\n          directive(key, props, tag, this);\r\n          delete props[key];\r\n        }\r\n      });\r\n      return h(tag, props, ...children);\r\n    }\r\n    const html = p ? this.view(state, p) : this.view(state);\r\n    app.createElement = h;\r\n    return html;\r\n  }\r\n\r\n  private renderState(state: T, vdom = null) {\r\n    if (!this.view) return;\r\n    const html = vdom || this._view(state);\r\n    app['debug'] && app.run('debug', {\r\n      component: this,\r\n      state,\r\n      vdom: html || '[vdom is null - no render]',\r\n    });\r\n\r\n    if (typeof document !== 'object') return;\r\n\r\n    const el = (typeof this.element === 'string') ?\r\n      document.getElementById(this.element) : this.element;\r\n\r\n    if (el) {\r\n      const tracking_attr = '_c';\r\n      if (!this.unload) {\r\n        el.removeAttribute && el.removeAttribute(tracking_attr);\r\n      } else if (el['_component'] !== this || el.getAttribute(tracking_attr) !== this.tracking_id) {\r\n        this.tracking_id = new Date().valueOf().toString();\r\n        el.setAttribute(tracking_attr, this.tracking_id);\r\n        if (typeof MutationObserver !== 'undefined') {\r\n          if(!this.observer)  this.observer = new MutationObserver(changes => {\r\n            if (changes[0].oldValue === this.tracking_id || !document.body.contains(el)) {\r\n              this.unload(this.state);\r\n              this.observer.disconnect();\r\n              this.observer = null;\r\n            }\r\n          });\r\n          this.observer.observe(document.body, {\r\n            childList: true, subtree: true,\r\n            attributes: true, attributeOldValue: true, attributeFilter: [tracking_attr]\r\n          });\r\n        }\r\n      }\r\n      el['_component'] = this;\r\n    }\r\n    if (!vdom) this.render(el, html);\r\n    this.rendered && this.rendered(this.state);\r\n  }\r\n\r\n  public setState(state: T, options: ActionOptions\r\n    = { render: true, history: false}) {\r\n    if (state instanceof Promise) {\r\n      // Promise will not be saved or rendered\r\n      // state will be saved and rendered when promise is resolved\r\n      state.then(s => {\r\n        this.setState(s, options)\r\n      }).catch(err => {\r\n        console.error(err);\r\n        throw err;\r\n      });\r\n      this._state = state;\r\n    } else {\r\n      this._state = state;\r\n      if (state == null) return;\r\n      this.state = state;\r\n      if (options.render !== false) this.renderState(state);\r\n      if (options.history !== false && this.enable_history) {\r\n        this._history = [...this._history, state];\r\n        this._history_idx = this._history.length - 1;\r\n      }\r\n      if (typeof options.callback === 'function') options.callback(this.state);\r\n    }\r\n  }\r\n\r\n  private _history_prev = () => {\r\n    this._history_idx--;\r\n    if (this._history_idx >= 0) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = 0;\r\n    }\r\n  };\r\n\r\n  private _history_next = () => {\r\n    this._history_idx++;\r\n    if (this._history_idx < this._history.length) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = this._history.length - 1;\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    protected state?: T,\r\n    protected view?: View<T>,\r\n    protected update?: Update<T, E>,\r\n    protected options?) {\r\n  }\r\n\r\n  start = (element = null,\r\n    options: { render?: boolean, history?, global_event?: boolean } = { render: true }): Component<T> => {\r\n    return this.mount(element, { ...options, render: true });\r\n  }\r\n\r\n  public mount(element = null, options?: { render?: boolean, history?, global_event?: boolean}) {\r\n\r\n    console.assert(!this.element, 'Component already mounted.')\r\n    this.options = options = { ...this.options, ...options };\r\n    this.element = element;\r\n    this.global_event = options.global_event;\r\n    this.enable_history = !!options.history;\r\n\r\n    if (this.enable_history) {\r\n      this.on(options.history.prev || 'history-prev', this._history_prev);\r\n      this.on(options.history.next || 'history-next', this._history_next);\r\n    }\r\n    this.add_actions();\r\n    this.state = this.state ?? this['model'] ?? {};\r\n    if (options.render) {\r\n      this.setState(this.state, { render: true, history: true });\r\n    } else {\r\n      this.setState(this.state, { render: false, history: true });\r\n    }\r\n    if (app['debug']) {\r\n      const id = typeof element === 'string' ? element : element.id;\r\n      componentCache[id] = componentCache[id] || [];\r\n      componentCache[id].push(this);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  is_global_event(name: string): boolean {\r\n    return name && (\r\n      this.global_event ||\r\n      this._global_events.indexOf(name) >= 0 ||\r\n      name.startsWith('#') || name.startsWith('/') || name.startsWith('@'));\r\n  }\r\n\r\n  add_action(name: string, action, options: ActionOptions = {}) {\r\n    if (!action || typeof action !== 'function') return;\r\n    if (options.global) this. _global_events.push(name);\r\n    this.on(name as any, (...p) => {\r\n      const newState = action(this.state, ...p);\r\n\r\n      app['debug'] && app.run('debug', {\r\n        component: this,\r\n        'event': name,\r\n        e: p,\r\n        state: this.state,\r\n        newState,\r\n        options\r\n      })\r\n\r\n      this.setState(newState, options)\r\n    }, options);\r\n  }\r\n\r\n  add_actions() {\r\n    const actions = this.update || {};\r\n    Reflect.getMetadataKeys(this).forEach(key => {\r\n      if (key.startsWith('apprun-update:')) {\r\n        const meta = Reflect.getMetadata(key, this)\r\n        actions[meta.name] = [this[meta.key].bind(this), meta.options];\r\n      }\r\n    })\r\n\r\n    const all = {};\r\n    if (Array.isArray(actions)) {\r\n      actions.forEach(act => {\r\n        const [name, action, opts] = act as ActionDef<T, E>;\r\n        const names = name.toString();\r\n        names.split(',').forEach(n => all[n.trim()] = [action, opts])\r\n      })\r\n    } else {\r\n      Object.keys(actions).forEach(name => {\r\n        const action = actions[name];\r\n        if (typeof action === 'function' || Array.isArray(action)) {\r\n          name.split(',').forEach(n => all[n.trim()] = action)\r\n        }\r\n      })\r\n    }\r\n\r\n    if (!all['.']) all['.'] = REFRESH;\r\n    Object.keys(all).forEach(name => {\r\n      const action = all[name];\r\n      if (typeof action === 'function') {\r\n        this.add_action(name, action);\r\n      } else if (Array.isArray(action)) {\r\n        this.add_action(name, action[0], action[1]);\r\n      }\r\n    });\r\n  }\r\n\r\n  public run(event: E, ...args) {\r\n    const name = event.toString();\r\n    return this.is_global_event(name) ?\r\n      app.run(name, ...args) :\r\n      this._app.run(name, ...args);\r\n  }\r\n\r\n  public on(event: E, fn: (...args) => void, options?: any) {\r\n    const name = event.toString();\r\n    this._actions.push({ name, fn });\r\n    return this.is_global_event(name) ?\r\n      app.on(name, fn, options) :\r\n      this._app.on(name, fn, options);\r\n  }\r\n\r\n  public unmount() {\r\n    this.observer?.disconnect();\r\n    this._actions.forEach(action => {\r\n      const { name, fn } = action;\r\n      this.is_global_event(name) ?\r\n        app.off(name, fn) :\r\n        this._app.off(name, fn);\r\n    });\r\n  }\r\n}\r\n","import app from './app';\n\nexport type Route = (url: string, ...args: any[]) => any;\n\nexport const ROUTER_EVENT: string = '//';\nexport const ROUTER_404_EVENT: string = '///';\n\nexport const route: Route = (url: string) => {\n  if (!url) url = '#';\n  if (url.startsWith('#')) {\n    const [name, ...rest] = url.split('/');\n    app.run(name, ...rest) || app.run(ROUTER_404_EVENT, name, ...rest);\n    app.run(ROUTER_EVENT, name, ...rest);\n  } else if (url.startsWith('/')) {\n    const [_, name, ...rest] = url.split('/');\n    app.run('/' + name, ...rest) || app.run(ROUTER_404_EVENT, '/' + name, ...rest);\n    app.run(ROUTER_EVENT, '/' + name, ...rest);\n  } else {\n    app.run(url) || app.run(ROUTER_404_EVENT, url);\n    app.run(ROUTER_EVENT, url);\n  }\n}\nexport default route;","import app from './app';\nimport { createElement, render, Fragment } from './vdom';\nimport { Component } from './component';\nimport { VNode, View, Action, Update, EventOptions, ActionOptions } from './types';\nimport { on, update, customElement } from './decorator';\nimport webComponent, { CustomElementOptions } from './web-component';\nimport { Route, route, ROUTER_EVENT, ROUTER_404_EVENT } from './router';\n\nexport interface IApp {\n  start<T, E=any>(element?: Element | string, model?: T, view?: View<T>, update?: Update<T, E>,\n    options?: { history?, rendered?: (state: T) => void}): Component<T, E>;\n  on(name: string, fn: (...args: any[]) => void, options?: any): void;\n  off(name: string, fn: (...args: any[]) => void): void;\n  run(name: string, ...args: any[]): number;\n  createElement(tag: string | Function, props, ...children): VNode | VNode[];\n  render(element: HTMLElement, node: VNode): void;\n  Fragment(props, ...children): any[];\n  route?: Route;\n  webComponent(name: string, componentClass, options?: CustomElementOptions): void;\n}\n\napp.createElement = createElement;\napp.render = render;\napp.Fragment = Fragment;\napp.webComponent = webComponent;\n\napp.start = <T, E=any>(element?: HTMLElement | string, model?: T,  view?: View<T>, update?: Update<T, E>,\n  options?: { history?, rendered?: (state: T) => void }) : Component<T, E> => {\n    const opts = {...options, render: true, global_event: true };\n    const component = new Component<T, E>(model, view, update);\n    if (options && options.rendered) component.rendered = options.rendered;\n    component.mount(element, opts);\n    return component;\n};\n\nconst NOOP = _ => {/* Intentionally empty */ }\napp.on('$', NOOP);\napp.on('debug', _ => NOOP);\napp.on(ROUTER_EVENT, NOOP);\napp.on('#', NOOP);\napp['route'] = route;\napp.on('route', url => app['route'] && app['route'](url));\n\nif (typeof document === 'object') {\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    if (app['route'] === route) {\n      window.onpopstate = () => route(location.hash);\n      route(location.hash);\n    }\n  });\n}\n\nexport type StatelessComponent<T={}> = (args: T) => string | VNode | void;\nexport { app, Component, View, Action, Update, on, update, EventOptions, ActionOptions }\nexport { update as event };\nexport { ROUTER_EVENT, ROUTER_404_EVENT };\nexport { customElement, CustomElementOptions };\nexport default app as IApp;\n\nif (typeof window === 'object') {\n  window['Component'] = Component;\n  window['React'] = app;\n}\n\n\n","import { createElement, updateElement, Fragment } from './vdom-my';\nexport function render(element, html, parent?) {\n  updateElement(element, html, parent);\n}\nexport { createElement, Fragment };\n\n\n","/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = /[&<>\"']/g;\nconst escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nconst escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n  if (encode) {\n    if (escapeTest.test(html)) {\n      return html.replace(escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (escapeTestNoEncode.test(html)) {\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nconst caret = /(^|[^\\[])\\^/g;\nfunction edit(regex, opt) {\n  regex = regex.source || regex;\n  opt = opt || '';\n  const obj = {\n    replace: (name, val) => {\n      val = val.source || val;\n      val = val.replace(caret, '$1');\n      regex = regex.replace(name, val);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(regex, opt);\n    }\n  };\n  return obj;\n}\n\nconst nonWordAndColonTest = /[^\\w:]/g;\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    let prot;\n    try {\n      prot = decodeURIComponent(unescape(href))\n        .replace(nonWordAndColonTest, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nconst baseUrls = {};\nconst justDomain = /^[^:]+:\\/*[^/]*$/;\nconst protocol = /^([^:]+:)[\\s\\S]*$/;\nconst domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (justDomain.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n  const relativeBase = base.indexOf(':') === -1;\n\n  if (href.substring(0, 2) === '//') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(protocol, '$1') + href;\n  } else if (href.charAt(0) === '/') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(domain, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\n\nconst noopTest = { exec: function noopTest() {} };\n\nfunction merge(obj) {\n  let i = 1,\n    target,\n    key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n      let escaped = false,\n        curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(/ \\|/);\n  let i = 0;\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n// /c*$/ is vulnerable to REDOS.\n// invert: Remove suffix of non-c chars instead. Default falsey.\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.substr(0, l - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  const l = str.length;\n  let level = 0,\n    i = 0;\n  for (; i < l; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\nmodule.exports = {\n  escape,\n  unescape,\n  edit,\n  cleanUrl,\n  resolveUrl,\n  noopTest,\n  merge,\n  splitCells,\n  rtrim,\n  findClosingBracket,\n  checkSanitizeDeprecation\n};\n","function getDefaults() {\n  return {\n    baseUrl: null,\n    breaks: false,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: null,\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartLists: false,\n    smartypants: false,\n    xhtml: false\n  };\n}\n\nfunction changeDefaults(newDefaults) {\n  module.exports.defaults = newDefaults;\n}\n\nmodule.exports = {\n  defaults: getDefaults(),\n  getDefaults,\n  changeDefaults\n};\n","const Lexer = require('./Lexer.js');\nconst Parser = require('./Parser.js');\nconst Renderer = require('./Renderer.js');\nconst TextRenderer = require('./TextRenderer.js');\nconst InlineLexer = require('./InlineLexer.js');\nconst Slugger = require('./Slugger.js');\nconst {\n  merge,\n  checkSanitizeDeprecation,\n  escape\n} = require('./helpers.js');\nconst {\n  getDefaults,\n  changeDefaults,\n  defaults\n} = require('./defaults.js');\n\n/**\n * Marked\n */\nfunction marked(src, opt, callback) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  if (callback || typeof opt === 'function') {\n    if (!callback) {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n    const highlight = opt.highlight;\n    let tokens,\n      pending,\n      i = 0;\n\n    try {\n      tokens = Lexer.lex(src, opt);\n    } catch (e) {\n      return callback(e);\n    }\n\n    pending = tokens.length;\n\n    const done = function(err) {\n      if (err) {\n        opt.highlight = highlight;\n        return callback(err);\n      }\n\n      let out;\n\n      try {\n        out = Parser.parse(tokens, opt);\n      } catch (e) {\n        err = e;\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!pending) return done();\n\n    for (; i < tokens.length; i++) {\n      (function(token) {\n        if (token.type !== 'code') {\n          return --pending || done();\n        }\n        return highlight(token.text, token.lang, function(err, code) {\n          if (err) return done(err);\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n    return Parser.parse(Lexer.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  changeDefaults(marked.defaults);\n  return marked;\n};\n\nmarked.getDefaults = getDefaults;\n\nmarked.defaults = defaults;\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\nmarked.TextRenderer = TextRenderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.InlineLexer = InlineLexer;\nmarked.inlineLexer = InlineLexer.output;\n\nmarked.Slugger = Slugger;\n\nmarked.parse = marked;\n\nmodule.exports = marked;\n","const { defaults } = require('./defaults.js');\nconst {\n  cleanUrl,\n  escape\n} = require('./helpers.js');\n\n/**\n * Renderer\n */\nmodule.exports = class Renderer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  code(code, infostring, escaped) {\n    const lang = (infostring || '').match(/\\S*/)[0];\n    if (this.options.highlight) {\n      const out = this.options.highlight(code, lang);\n      if (out != null && out !== code) {\n        escaped = true;\n        code = out;\n      }\n    }\n\n    if (!lang) {\n      return '<pre><code>'\n        + (escaped ? code : escape(code, true))\n        + '</code></pre>';\n    }\n\n    return '<pre><code class=\"'\n      + this.options.langPrefix\n      + escape(lang, true)\n      + '\">'\n      + (escaped ? code : escape(code, true))\n      + '</code></pre>\\n';\n  };\n\n  blockquote(quote) {\n    return '<blockquote>\\n' + quote + '</blockquote>\\n';\n  };\n\n  html(html) {\n    return html;\n  };\n\n  heading(text, level, raw, slugger) {\n    if (this.options.headerIds) {\n      return '<h'\n        + level\n        + ' id=\"'\n        + this.options.headerPrefix\n        + slugger.slug(raw)\n        + '\">'\n        + text\n        + '</h'\n        + level\n        + '>\\n';\n    }\n    // ignore IDs\n    return '<h' + level + '>' + text + '</h' + level + '>\\n';\n  };\n\n  hr() {\n    return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n  };\n\n  list(body, ordered, start) {\n    const type = ordered ? 'ol' : 'ul',\n      startatt = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n    return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n  };\n\n  listitem(text) {\n    return '<li>' + text + '</li>\\n';\n  };\n\n  checkbox(checked) {\n    return '<input '\n      + (checked ? 'checked=\"\" ' : '')\n      + 'disabled=\"\" type=\"checkbox\"'\n      + (this.options.xhtml ? ' /' : '')\n      + '> ';\n  };\n\n  paragraph(text) {\n    return '<p>' + text + '</p>\\n';\n  };\n\n  table(header, body) {\n    if (body) body = '<tbody>' + body + '</tbody>';\n\n    return '<table>\\n'\n      + '<thead>\\n'\n      + header\n      + '</thead>\\n'\n      + body\n      + '</table>\\n';\n  };\n\n  tablerow(content) {\n    return '<tr>\\n' + content + '</tr>\\n';\n  };\n\n  tablecell(content, flags) {\n    const type = flags.header ? 'th' : 'td';\n    const tag = flags.align\n      ? '<' + type + ' align=\"' + flags.align + '\">'\n      : '<' + type + '>';\n    return tag + content + '</' + type + '>\\n';\n  };\n\n  // span level renderer\n  strong(text) {\n    return '<strong>' + text + '</strong>';\n  };\n\n  em(text) {\n    return '<em>' + text + '</em>';\n  };\n\n  codespan(text) {\n    return '<code>' + text + '</code>';\n  };\n\n  br() {\n    return this.options.xhtml ? '<br/>' : '<br>';\n  };\n\n  del(text) {\n    return '<del>' + text + '</del>';\n  };\n\n  link(href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n    let out = '<a href=\"' + escape(href) + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += '>' + text + '</a>';\n    return out;\n  };\n\n  image(href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n\n    let out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += this.options.xhtml ? '/>' : '>';\n    return out;\n  };\n\n  text(text) {\n    return text;\n  };\n};\n","const {\n  noopTest,\n  edit,\n  merge\n} = require('./helpers.js');\n\n/**\n * Block-Level Grammar\n */\nconst block = {\n  newline: /^\\n+/,\n  code: /^( {4}[^\\n]+\\n*)+/,\n  fences: /^ {0,3}(`{3,}|~{3,})([^`~\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?:\\n+|$)|$)/,\n  hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n  heading: /^ {0,3}(#{1,6}) +([^\\n]*?)(?: +#+)? *(?:\\n+|$)/,\n  blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n  list: /^( {0,3})(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n  html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?\\\\?>\\\\n*' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?>\\\\n*' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\\\\n*' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (6)\n    + '|<(?!script|pre|style)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) open tag\n    + '|</(?!script|pre|style)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) closing tag\n    + ')',\n  def: /^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,\n  nptable: noopTest,\n  table: noopTest,\n  lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  // regex template, placeholders will be replaced according to different paragraph\n  // interruption rules of commonmark and the original markdown spec:\n  _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\\n]+)*)/,\n  text: /^[^\\n]+/\n};\n\nblock._label = /(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/;\nblock._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\nblock.def = edit(block.def)\n  .replace('label', block._label)\n  .replace('title', block._title)\n  .getRegex();\n\nblock.bullet = /(?:[*+-]|\\d{1,9}\\.)/;\nblock.item = /^( *)(bull) ?[^\\n]*(?:\\n(?!\\1bull ?)[^\\n]*)*/;\nblock.item = edit(block.item, 'gm')\n  .replace(/bull/g, block.bullet)\n  .getRegex();\n\nblock.list = edit(block.list)\n  .replace(/bull/g, block.bullet)\n  .replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))')\n  .replace('def', '\\\\n+(?=' + block.def.source + ')')\n  .getRegex();\n\nblock._tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n  + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\n  + '|track|ul';\nblock._comment = /<!--(?!-?>)[\\s\\S]*?-->/;\nblock.html = edit(block.html, 'i')\n  .replace('comment', block._comment)\n  .replace('tag', block._tag)\n  .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nblock.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} +')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}|~{3,})[^`\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.blockquote = edit(block.blockquote)\n  .replace('paragraph', block.paragraph)\n  .getRegex();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  nptable: /^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:.*[^>\\n ].*(?:\\n|$))*)\\n*|$)/,\n  table: /^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n((?: *[^>\\n ].*(?:\\n|$))*)\\n*|$)/\n});\n\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\n\nblock.pedantic = merge({}, block.normal, {\n  html: edit(\n    '^ *(?:comment *(?:\\\\n|\\\\s*$)'\n    + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n    .replace('comment', block._comment)\n    .replace(/tag/g, '(?!(?:'\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n      + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n    .getRegex(),\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?) *(?:#+ *)?(?:\\n+|$)/,\n  fences: noopTest, // fences not supported\n  paragraph: edit(block.normal._paragraph)\n    .replace('hr', block.hr)\n    .replace('heading', ' *#{1,6} *[^\\n]')\n    .replace('lheading', block.lheading)\n    .replace('blockquote', ' {0,3}>')\n    .replace('|fences', '')\n    .replace('|list', '')\n    .replace('|html', '')\n    .getRegex()\n});\n\n/**\n * Inline-Level Grammar\n */\nconst inline = {\n  escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n  autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n  url: noopTest,\n  tag: '^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>', // CDATA section\n  link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n  reflink: /^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,\n  nolink: /^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,\n  strong: /^__([^\\s_])__(?!_)|^\\*\\*([^\\s*])\\*\\*(?!\\*)|^__([^\\s][\\s\\S]*?[^\\s])__(?!_)|^\\*\\*([^\\s][\\s\\S]*?[^\\s])\\*\\*(?!\\*)/,\n  em: /^_([^\\s_])_(?!_)|^\\*([^\\s*<\\[])\\*(?!\\*)|^_([^\\s<][\\s\\S]*?[^\\s_])_(?!_|[^\\spunctuation])|^_([^\\s_<][\\s\\S]*?[^\\s])_(?!_|[^\\spunctuation])|^\\*([^\\s<\"][\\s\\S]*?[^\\s\\*])\\*(?!\\*|[^\\spunctuation])|^\\*([^\\s*\"<\\[][\\s\\S]*?[^\\s])\\*(?!\\*)/,\n  code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n  br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n  del: noopTest,\n  text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*]|\\b_|$)|[^ ](?= {2,}\\n))|(?= {2,}\\n))/\n};\n\n// list of punctuation marks from common mark spec\n// without ` and ] to workaround Rule 17 (inline code blocks/links)\ninline._punctuation = '!\"#$%&\\'()*+,\\\\-./:;<=>?@\\\\[^_{|}~';\ninline.em = edit(inline.em).replace(/punctuation/g, inline._punctuation).getRegex();\n\ninline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n\ninline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\ninline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\ninline.autolink = edit(inline.autolink)\n  .replace('scheme', inline._scheme)\n  .replace('email', inline._email)\n  .getRegex();\n\ninline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n\ninline.tag = edit(inline.tag)\n  .replace('comment', block._comment)\n  .replace('attribute', inline._attribute)\n  .getRegex();\n\ninline._label = /(?:\\[[^\\[\\]]*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\ninline._href = /<(?:\\\\[<>]?|[^\\s<>\\\\])*>|[^\\s\\x00-\\x1f]*/;\ninline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n\ninline.link = edit(inline.link)\n  .replace('label', inline._label)\n  .replace('href', inline._href)\n  .replace('title', inline._title)\n  .getRegex();\n\ninline.reflink = edit(inline.reflink)\n  .replace('label', inline._label)\n  .getRegex();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/,\n  link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n    .replace('label', inline._label)\n    .getRegex(),\n  reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n    .replace('label', inline._label)\n    .getRegex()\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n  url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n  _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n  del: /^~+(?=\\S)([\\s\\S]*?\\S)~+/,\n  text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*~]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))|(?= {2,}\\n|[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))/\n});\n\ninline.gfm.url = edit(inline.gfm.url, 'i')\n  .replace('email', inline.gfm._extended_email)\n  .getRegex();\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: edit(inline.br).replace('{2,}', '*').getRegex(),\n  text: edit(inline.gfm.text)\n    .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n    .replace(/\\{2,\\}/g, '*')\n    .getRegex()\n});\n\nmodule.exports = {\n  block,\n  inline\n};\n","/**\n * Slugger generates header id\n */\nmodule.exports = class Slugger {\n  constructor() {\n    this.seen = {};\n  }\n\n  /**\n   * Convert string to unique id\n   */\n  slug(value) {\n    let slug = value\n      .toLowerCase()\n      .trim()\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '')\n      .replace(/\\s/g, '-');\n\n    if (this.seen.hasOwnProperty(slug)) {\n      const originalSlug = slug;\n      do {\n        this.seen[originalSlug]++;\n        slug = originalSlug + '-' + this.seen[originalSlug];\n      } while (this.seen.hasOwnProperty(slug));\n    }\n    this.seen[slug] = 0;\n\n    return slug;\n  };\n};\n","const Renderer = require('./Renderer.js');\nconst { defaults } = require('./defaults.js');\nconst { inline } = require('./rules.js');\nconst {\n  findClosingBracket,\n  escape\n} = require('./helpers.js');\n\n/**\n * Inline Lexer & Compiler\n */\nmodule.exports = class InlineLexer {\n  constructor(links, options) {\n    this.options = options || defaults;\n    this.links = links;\n    this.rules = inline.normal;\n    this.options.renderer = this.options.renderer || new Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n\n    if (!this.links) {\n      throw new Error('Tokens array requires a `links` property.');\n    }\n\n    if (this.options.pedantic) {\n      this.rules = inline.pedantic;\n    } else if (this.options.gfm) {\n      if (this.options.breaks) {\n        this.rules = inline.breaks;\n      } else {\n        this.rules = inline.gfm;\n      }\n    }\n  }\n\n  /**\n   * Expose Inline Rules\n   */\n  static get rules() {\n    return inline;\n  }\n\n  /**\n   * Static Lexing/Compiling Method\n   */\n  static output(src, links, options) {\n    const inline = new InlineLexer(links, options);\n    return inline.output(src);\n  }\n\n  /**\n   * Lexing/Compiling\n   */\n  output(src) {\n    let out = '',\n      link,\n      text,\n      href,\n      title,\n      cap,\n      prevCapZero;\n\n    while (src) {\n      // escape\n      if (cap = this.rules.escape.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += escape(cap[1]);\n        continue;\n      }\n\n      // tag\n      if (cap = this.rules.tag.exec(src)) {\n        if (!this.inLink && /^<a /i.test(cap[0])) {\n          this.inLink = true;\n        } else if (this.inLink && /^<\\/a>/i.test(cap[0])) {\n          this.inLink = false;\n        }\n        if (!this.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.inRawBlock = true;\n        } else if (this.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.inRawBlock = false;\n        }\n\n        src = src.substring(cap[0].length);\n        out += this.options.sanitize\n          ? this.options.sanitizer\n            ? this.options.sanitizer(cap[0])\n            : escape(cap[0])\n          : cap[0];\n        continue;\n      }\n\n      // link\n      if (cap = this.rules.link.exec(src)) {\n        const lastParenIndex = findClosingBracket(cap[2], '()');\n        if (lastParenIndex > -1) {\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          const linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n        src = src.substring(cap[0].length);\n        this.inLink = true;\n        href = cap[2];\n        if (this.options.pedantic) {\n          link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          } else {\n            title = '';\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n        href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n        out += this.outputLink(cap, {\n          href: InlineLexer.escapes(href),\n          title: InlineLexer.escapes(title)\n        });\n        this.inLink = false;\n        continue;\n      }\n\n      // reflink, nolink\n      if ((cap = this.rules.reflink.exec(src))\n          || (cap = this.rules.nolink.exec(src))) {\n        src = src.substring(cap[0].length);\n        link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = this.links[link.toLowerCase()];\n        if (!link || !link.href) {\n          out += cap[0].charAt(0);\n          src = cap[0].substring(1) + src;\n          continue;\n        }\n        this.inLink = true;\n        out += this.outputLink(cap, link);\n        this.inLink = false;\n        continue;\n      }\n\n      // strong\n      if (cap = this.rules.strong.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.strong(this.output(cap[4] || cap[3] || cap[2] || cap[1]));\n        continue;\n      }\n\n      // em\n      if (cap = this.rules.em.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.em(this.output(cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]));\n        continue;\n      }\n\n      // code\n      if (cap = this.rules.code.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.codespan(escape(cap[2].trim(), true));\n        continue;\n      }\n\n      // br\n      if (cap = this.rules.br.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.br();\n        continue;\n      }\n\n      // del (gfm)\n      if (cap = this.rules.del.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.del(this.output(cap[1]));\n        continue;\n      }\n\n      // autolink\n      if (cap = this.rules.autolink.exec(src)) {\n        src = src.substring(cap[0].length);\n        if (cap[2] === '@') {\n          text = escape(this.mangle(cap[1]));\n          href = 'mailto:' + text;\n        } else {\n          text = escape(cap[1]);\n          href = text;\n        }\n        out += this.renderer.link(href, null, text);\n        continue;\n      }\n\n      // url (gfm)\n      if (!this.inLink && (cap = this.rules.url.exec(src))) {\n        if (cap[2] === '@') {\n          text = escape(cap[0]);\n          href = 'mailto:' + text;\n        } else {\n          // do extended autolink path validation\n          do {\n            prevCapZero = cap[0];\n            cap[0] = this.rules._backpedal.exec(cap[0])[0];\n          } while (prevCapZero !== cap[0]);\n          text = escape(cap[0]);\n          if (cap[1] === 'www.') {\n            href = 'http://' + text;\n          } else {\n            href = text;\n          }\n        }\n        src = src.substring(cap[0].length);\n        out += this.renderer.link(href, null, text);\n        continue;\n      }\n\n      // text\n      if (cap = this.rules.text.exec(src)) {\n        src = src.substring(cap[0].length);\n        if (this.inRawBlock) {\n          out += this.renderer.text(this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0]);\n        } else {\n          out += this.renderer.text(escape(this.smartypants(cap[0])));\n        }\n        continue;\n      }\n\n      if (src) {\n        throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n      }\n    }\n\n    return out;\n  }\n\n  static escapes(text) {\n    return text ? text.replace(InlineLexer.rules._escapes, '$1') : text;\n  }\n\n  /**\n   * Compile Link\n   */\n  outputLink(cap, link) {\n    const href = link.href,\n      title = link.title ? escape(link.title) : null;\n\n    return cap[0].charAt(0) !== '!'\n      ? this.renderer.link(href, title, this.output(cap[1]))\n      : this.renderer.image(href, title, escape(cap[1]));\n  }\n\n  /**\n   * Smartypants Transformations\n   */\n  smartypants(text) {\n    if (!this.options.smartypants) return text;\n    return text\n      // em-dashes\n      .replace(/---/g, '\\u2014')\n      // en-dashes\n      .replace(/--/g, '\\u2013')\n      // opening singles\n      .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n      // closing singles & apostrophes\n      .replace(/'/g, '\\u2019')\n      // opening doubles\n      .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n      // closing doubles\n      .replace(/\"/g, '\\u201d')\n      // ellipses\n      .replace(/\\.{3}/g, '\\u2026');\n  }\n\n  /**\n   * Mangle Links\n   */\n  mangle(text) {\n    if (!this.options.mangle) return text;\n    const l = text.length;\n    let out = '',\n      i = 0,\n      ch;\n\n    for (; i < l; i++) {\n      ch = text.charCodeAt(i);\n      if (Math.random() > 0.5) {\n        ch = 'x' + ch.toString(16);\n      }\n      out += '&#' + ch + ';';\n    }\n\n    return out;\n  }\n};\n","/**\n * TextRenderer\n * returns only the textual part of the token\n */\nmodule.exports = class TextRenderer {\n  // no need for block level renderers\n  strong(text) {\n    return text;\n  }\n\n  em(text) {\n    return text;\n  }\n\n  codespan(text) {\n    return text;\n  }\n\n  del(text) {\n    return text;\n  }\n\n  text(text) {\n    return text;\n  }\n\n  link(href, title, text) {\n    return '' + text;\n  }\n\n  image(href, title, text) {\n    return '' + text;\n  }\n\n  br() {\n    return '';\n  }\n};\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","import { EventOptions} from './types'\nexport class App {\n\n  private _events: Object;\n\n  public start;\n  public createElement;\n  public render;\n  public Fragment;\n  public webComponent;\n\n  constructor() {\n    this._events = {};\n  }\n\n  on(name: string, fn: (...args) => void, options: EventOptions = {}): void {\n    this._events[name] = this._events[name] || [];\n    this._events[name].push({ fn, options });\n  }\n\n  off(name: string, fn: (...args) => void): void {\n    const subscribers = this._events[name] || [];\n    \n    this._events[name] = subscribers.filter((sub) => sub.fn !== fn);\n  }\n\n  find(name: string): any {\n    return this._events[name];\n  }\n\n  run(name: string, ...args): number {\n    let subscribers = this._events[name] || [];\n\n    console.assert(subscribers && subscribers.length > 0, 'No subscriber for event: ' + name);\n\n    // Update the list of subscribers by pulling out those which will run once.\n    // We must do this update prior to running any of the events in case they\n    // cause additional events to be turned off or on.\n    this._events[name] = subscribers.filter((sub) => {\n      return !sub.options.once;\n    });\n\n    subscribers.forEach((sub) => {\n      const { fn, options } = sub;\n      if (options.delay) {\n        this.delay(name, fn, args, options);\n      } else {\n        fn.apply(this, args);\n      }\n      return !sub.options.once;\n    });\n\n    return subscribers.length;\n  }\n\n  once(name: string, fn, options: EventOptions = {}): void {\n    this.on(name, fn, { ...options, once: true });\n  }\n\n  private delay(name, fn, args, options): void {\n    if (options._t) clearTimeout(options._t);\n    options._t = setTimeout(() => {\n      clearTimeout(options._t);\n      fn.apply(this, args);\n    }, options.delay);\n  }\n}\n\nconst AppRunVersions = 'AppRun-2';\nlet app: App;\nconst root = (typeof self === 'object' && self.self === self && self) ||\n  (typeof global === 'object' && global.global === global && global)\nif (root['app'] && root['_AppRunVersions']) {\n  app = root['app'];\n} else {\n  app = new App();\n  root['app'] = app;\n  root['_AppRunVersions'] = AppRunVersions;\n}\nexport default app;\n","import app from './app';\n\nfunction render(node, parent, idx) {\n  const { tag, props, children } = node;\n  let key = `_${idx}`;\n  let id = props && props['id'];\n  if (!id) id = `_${idx}${Date.now()}`;\n  else key = id;\n  if (!parent.__componentCache) parent.__componentCache = {};\n  let component = parent.__componentCache[key];\n  if (!component) {\n    component = parent.__componentCache[key] = new tag({ ...props, children }).mount(id);\n    component['__eid'] = id;\n  } else {\n    id = component['__eid'];\n  }\n  let state = component.state;\n  if (component.mounted) {\n    const new_state = component.mounted(props, children);\n    if (typeof new_state !== 'undefined') state = component.state = new_state;\n  }\n  let vdom = '';\n  if (component.view) {\n    if (state instanceof Promise) {\n      state.then(() => component.run('.'));\n    } else {\n      vdom = component._view(state, props);\n      component.rendered && requestAnimationFrame(() => component.rendered(state, props));\n    }\n  }\n  return <section {...props} id={id}>{vdom}</section>;\n}\n\nlet _idx = 0;\nexport default function createComponent(node, parent, idx = 0) {\n  if (idx === 0) _idx = 0;\n  if (typeof node === 'string') return node;\n  if (Array.isArray(node)) return node.map(child => createComponent(child, parent, _idx));\n  let vdom = node;\n  if (node && typeof node.tag === 'function' && Object.getPrototypeOf(node.tag).__isAppRunComponent)\n    vdom = render(node, parent, _idx++);\n  if (vdom && Array.isArray(vdom.children))\n    vdom.children = vdom.children.map(child => createComponent(child, parent, _idx));\n  return vdom;\n}\n","import createComponent from './createComponent';\nimport { VNode } from './types';\nexport type Element = any; //HTMLElement | SVGSVGElement | SVGElement;\n\nconst ATTR_PROPS = '_props';\n\nfunction collect(children) {\n  const ch = [];\n  const push = (c) => {\n    if (c !== null && c !== undefined && c !== '' && c !== false) {\n      ch.push((typeof c === 'function' || typeof c === 'object') ? c : `${c}`);\n    }\n  }\n  children && children.forEach(c => {\n    if (Array.isArray(c)) {\n      c.forEach(i => push(i));\n    } else {\n      push(c);\n    }\n  });\n  return ch;\n}\n\nexport function createElement(tag: string | Function | [], props?: {}, ...children) {\n  const ch = collect(children);\n  if (typeof tag === 'string') return { tag, props, children: ch };\n  else if (Array.isArray(tag)) return tag; // JSX fragments - babel\n  else if (tag === undefined && children) return ch; // JSX fragments - typescript\n  else if (Object.getPrototypeOf(tag).__isAppRunComponent) return { tag, props, children: ch } // createComponent(tag, { ...props, children });\n  else if (typeof tag === 'function') return tag(props, ch);\n  else throw new Error(`Unknown tag in vdom ${tag}`);\n};\n\nconst keyCache = {};\n\nexport const updateElement = render;\n\nexport function render(element: Element, nodes: VNode | VNode[], parent = {}) {\n  // console.log('render', element, node);\n  // tslint:disable-next-line\n  if (nodes == null) return;\n\n  nodes = createComponent(nodes, parent);\n\n  if (!element) return;\n  if (Array.isArray(nodes)) {\n    updateChildren(element, nodes);\n  } else {\n    updateChildren(element, [nodes]);\n  }\n}\n\nfunction same(el: Element, node: VNode) {\n  // if (!el || !node) return false;\n  const key1 = el.nodeName;\n  const key2 = `${node.tag || ''}`;\n  return key1.toUpperCase() === key2.toUpperCase();\n}\n\nfunction update(element: Element, node: VNode) {\n  console.assert(!!element);\n  //console.log('update', element, node);\n  if (!same(element, node)) {\n    element.parentNode.replaceChild(create(node), element);\n    return;\n  }\n  updateChildren(element, node.children);\n  updateProps(element, node.props);\n}\n\nfunction updateChildren(element, children) {\n  const len = Math.min(element.childNodes.length, children.length);\n  for (let i = 0; i < len; i++) {\n    const child = children[i];\n    const el = element.childNodes[i];\n    if (child instanceof HTMLElement) {\n      element.insertBefore(child, el);\n    }\n    else if (typeof child === 'string') {\n      if (el.textContent !== child) {\n        if (el.nodeType === 3) {\n          el.textContent = child\n        } else {\n          element.replaceChild(createText(child), el);\n        }\n      }\n    } else {\n      const key = child.props && child.props['key'];\n      if (key) {\n        if (el.key === key) {\n          update(element.childNodes[i], child);\n        } else {\n          const old = keyCache[key];\n          if (old) {\n            element.insertBefore(old, el);\n            element.appendChild(el);\n            update(element.childNodes[i], child);\n          } else {\n            element.insertBefore(create(child), el);\n          }\n        }\n      } else {\n        update(element.childNodes[i], child);\n      }\n    }\n  }\n\n  let n = element.childNodes.length;\n  while (n > len) {\n    element.removeChild(element.lastChild);\n    n--;\n  }\n\n  if (children.length > len) {\n    const d = document.createDocumentFragment();\n    for (let i = len; i < children.length; i++) {\n      d.appendChild(create(children[i]));\n    }\n    element.appendChild(d);\n  }\n}\n\nfunction createText(node) {\n  if (node.indexOf('_html:') === 0) { // ?\n    const div = document.createElement('div');\n    div.insertAdjacentHTML('afterbegin', node.substring(6))\n    return div;\n  } else {\n    return document.createTextNode(node);\n  }\n}\n\nfunction create(node: VNode | string | HTMLElement | SVGElement, isSvg = false): Element {\n  console.assert(node !== null && node !== undefined);\n  // console.log('create', node, typeof node);\n  if ((node instanceof HTMLElement) || (node instanceof SVGElement)) return node;\n  if (typeof node === \"string\") return createText(node);\n  if (!node.tag || (typeof node.tag === 'function')) return createText(JSON.stringify(node));\n  isSvg = isSvg || node.tag === \"svg\";\n  const element = isSvg\n    ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag)\n    : document.createElement(node.tag);\n\n  updateProps(element, node.props);\n\n  if (node.children) node.children.forEach(child => element.appendChild(create(child, isSvg)));\n\n  return element\n}\n\nfunction mergeProps(oldProps: {}, newProps: {}): {} {\n  newProps['class'] = newProps['class'] || newProps['className'];\n  delete newProps['className'];\n  const props = {};\n  if (oldProps) Object.keys(oldProps).forEach(p => props[p] = null);\n  if (newProps) Object.keys(newProps).forEach(p => props[p] = newProps[p]);\n  return props;\n}\n\nfunction updateProps(element: Element, props: {}) {\n  console.assert(!!element);\n  // console.log('updateProps', element, props);\n  const cached = element[ATTR_PROPS] || {};\n  props = mergeProps(cached, props || {});\n  element[ATTR_PROPS] = props;\n  for (const name in props) {\n    const value = props[name];\n    // if (cached[name] === value) continue;\n    // console.log('updateProps', name, value);\n    if (name === 'style') {\n      if (element.style.cssText) element.style.cssText = '';\n      for (const s in value) {\n        if (element.style[s] !== value[s]) element.style[s] = value[s];\n      }\n    } else if (name.startsWith('data-')) {\n      const dname = name.substring(5);\n      const cname = dname.replace(/-(\\w)/g, (match) => match[1].toUpperCase());\n      if (element.dataset[cname] !== value) {\n        if (value || value === \"\") element.dataset[cname] = value;\n        else delete element.dataset[cname];\n      }\n    } else if (name === 'id' || name === 'class' || name.startsWith(\"role\") || name.indexOf(\"-\") > 0 ||\n      element instanceof SVGElement) {\n      if (element.getAttribute(name) !== value) {\n        if (value) element.setAttribute(name, value);\n        else element.removeAttribute(name);\n      }\n    } else if (element[name] !== value) {\n        element[name] = value;\n    }\n    if (name === 'key' && value) keyCache[value] = element;\n  }\n  if (props && typeof props['ref'] === 'function') {\n    window.requestAnimationFrame(()=>props['ref'](element));\n  }\n}\n\nexport function Fragment(props, ...children): any[] {\n  return collect(children);\n}","declare var customElements;\n\nexport type CustomElementOptions = {\n  render?, shadow?, history?, global_event?: boolean;\n  observedAttributes?: string[]\n};\n\nexport const customElement = (componentClass, options: CustomElementOptions = {}) => class extends HTMLElement {\n  private _shadowRoot;\n  private _component;\n  public on;\n  public run;\n  constructor() {\n    super();\n  }\n  get component() { return this._component; }\n  get state() { return this._component.state; }\n\n  static get observedAttributes() {\n    return { ...options }['observedAttributes'];\n  }\n\n  connectedCallback() {\n    if (this.isConnected && !this._component) {\n      const opts = { render: true, shadow: false, ...options };\n      this._shadowRoot = opts.shadow ?\n        this.attachShadow({ mode: 'open' }) : this;\n      const props = {}\n      Array.from(this.attributes).forEach(item => props[item.name] = item.value);\n      const children = this.children ? Array.from(this.children) : [];\n      children.forEach(el => el.parentElement.removeChild(el));\n      this._component = new componentClass({ ...props, children }).mount(this._shadowRoot, opts);\n      this._component.mounted && this._component.mounted(props, children);\n      this.on = this._component.on.bind(this._component);\n      this.run = this._component.run.bind(this._component);\n    }\n  }\n\n  disconnectedCallback() {\n    this._component.unmount();\n    this._component = null;\n  }\n\n  attributeChangedCallback(...args) {\n    this._component && this._component.run('attributeChanged', ...args);\n  }\n}\n\nexport default (name: string, componentClass, options?: CustomElementOptions) => {\n  (typeof customElements !== 'undefined') && customElements.define(name, customElement(componentClass, options))\n}","import webComponent, { CustomElementOptions } from './web-component';\n\n// tslint:disable:no-invalid-this\nexport const Reflect = {\n\n  meta: new WeakMap(),\n\n  defineMetadata(metadataKey, metadataValue, target) {\n    if (!this.meta.has(target)) this.meta.set(target, {});\n    this.meta.get(target)[metadataKey] = metadataValue;\n  },\n\n  getMetadataKeys(target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? Object.keys(this.meta.get(target)) : [];\n  },\n\n  getMetadata(metadataKey, target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? this.meta.get(target)[metadataKey] : null;\n  }\n}\n\nexport function update<E=string>(events?: E, options: any = {}) {\n  return (target: any, key: string, descriptor: any) => {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target);\n    return descriptor;\n  }\n}\n\nexport function on<E>(events?: E, options: any = {}) {\n  return function (target: any, key: string) {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target)\n  }\n}\n\nexport function customElement(name: string, options?: CustomElementOptions) {\n  return function _customElement<T extends { new(...args: any[]): {} }>(constructor: T) {\n    webComponent(name, constructor, options);\n    return constructor;\n  }\n}\n\n","import app from './app';\n\nconst getStateValue = (component, name) => {\n  return (name ? component['state'][name] : component['state']) || '';\n}\n\nconst setStateValue = (component, name, value) => {\n  if (name) {\n    const state = { ...component['state'] };\n    state[name] = value;\n    component.setState(state);\n  } else {\n    component.setState(value);\n  }\n}\n\nexport default (key: string, props: [], tag, component) => {\n  if (key.startsWith('$on')) {\n    const event = props[key];\n    key = key.substring(1)\n    if (typeof event === 'boolean') {\n      props[key] = e => component.run(key, e);\n    } else if (typeof event === 'string') {\n      props[key] = e => component.run(event, e);\n    } else if (typeof event === 'function') {\n      props[key] = e => component.setState(event(component.state, e));\n    } else if (Array.isArray(event)) {\n      const [handler, ...p] = event;\n      if (typeof handler === 'string') {\n        props[key] = e => component.run(handler, ...p, e);\n      } else if (typeof handler === 'function') {\n        props[key] = e => component.setState(handler(component.state, ...p, e));\n      }\n    }\n\n  } else if (key === '$bind') {\n    const type = props['type'] || 'text';\n    const name = typeof props[key] === 'string' ? props[key] : props['name'];\n    if (tag === 'input') {\n      switch (type) {\n        case 'checkbox':\n          props['checked'] = getStateValue(component, name);\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.checked);\n          break;\n        case 'radio':\n          props['checked'] = getStateValue(component, name) === props['value'];\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.value);\n          break;\n        case 'number':\n        case 'range':\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, Number(e.target.value));\n          break;\n        default:\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n      }\n    } else if (tag === 'select') {\n      props['value'] = getStateValue(component, name);\n      props['onchange'] = e => {\n        if (!e.target.multiple) { // multiple selection use $bind on option\n          setStateValue(component, name || e.target.name, e.target.value);\n        }\n      }\n    } else if (tag === 'option') {\n      props['selected'] = getStateValue(component, name);\n      props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.selected);\n    }\n  } else {\n    app.run('$', { key, tag, props, component });\n  }\n}","\r\nimport app, { App } from './app';\r\nimport { Reflect } from './decorator'\r\nimport { View, Update, ActionDef, ActionOptions } from './types';\r\nimport directive from './directive';\r\n\r\nconst componentCache = {};\r\napp.on('get-components', o => o.components = componentCache);\r\n\r\nconst REFRESH = state => state;\r\n\r\nexport class Component<T=any, E=any> {\r\n  static __isAppRunComponent = true;\r\n  private _app = new App();\r\n  private _actions = [];\r\n  private _global_events = [];\r\n  private _state;\r\n  private _history = [];\r\n  private _history_idx = -1;\r\n  private enable_history;\r\n  private global_event;\r\n  public element;\r\n  public rendered;\r\n  public mounted;\r\n  public unload;\r\n  private tracking_id;\r\n\r\n  render(element: HTMLElement, node) {\r\n    app.render(element, node, this);\r\n  }\r\n\r\n  private _view(state, p = null) {\r\n    if (!this.view) return;\r\n    const h = app.createElement;\r\n    app.createElement = (tag, props, ...children) => {\r\n      props && Object.keys(props).forEach(key => {\r\n        if (key.startsWith('$')) {\r\n          directive(key, props, tag, this);\r\n          delete props[key];\r\n        }\r\n      });\r\n      return h(tag, props, ...children);\r\n    }\r\n    const html = p ? this.view(state, p) : this.view(state);\r\n    app.createElement = h;\r\n    return html;\r\n  }\r\n\r\n  private renderState(state: T) {\r\n    if (!this.view) return;\r\n    const html = this._view(state);\r\n    app['debug'] && app.run('debug', {\r\n      component: this,\r\n      state,\r\n      vdom: html || '[vdom is null - no render]',\r\n    });\r\n\r\n    if (typeof document !== 'object') return;\r\n\r\n    const el = (typeof this.element === 'string') ?\r\n      document.getElementById(this.element) : this.element;\r\n\r\n    if (el) {\r\n      const tracking_attr = '_c';\r\n      if (!this.unload) {\r\n        el.removeAttribute && el.removeAttribute(tracking_attr);\r\n      } else if (el['_component'] !== this) {\r\n        this.tracking_id = new Date().valueOf().toString();\r\n        el.setAttribute(tracking_attr, this.tracking_id);\r\n        if (typeof MutationObserver !== 'undefined') {\r\n          const observer = new MutationObserver(changes => {\r\n            const { removedNodes, oldValue } = changes[0];\r\n            if (oldValue === this.tracking_id || Array.from(removedNodes).indexOf(el) >= 0) {\r\n              this.unload(this.state);\r\n              observer.disconnect();\r\n            }\r\n          });\r\n          if (el.parentNode) observer.observe(el.parentNode, {\r\n            childList: true, subtree: true,\r\n            attributes: true, attributeOldValue: true, attributeFilter: [tracking_attr]\r\n          });\r\n        }\r\n      }\r\n      el['_component'] = this;\r\n    }\r\n    this.render(el, html);\r\n    if (this.rendered) (this.rendered(this.state));\r\n  }\r\n\r\n  public setState(state: T, options: ActionOptions\r\n    = { render: true, history: false}) {\r\n    if (state instanceof Promise) {\r\n      // Promise will not be saved or rendered\r\n      // state will be saved and rendered when promise is resolved\r\n      state.then(s => {\r\n        this.setState(s, options)\r\n      }).catch(err => {\r\n        console.error(err);\r\n        throw err;\r\n      });\r\n      this._state = state;\r\n    } else {\r\n      this._state = state;\r\n      if (state == null) return;\r\n      this.state = state;\r\n      if (options.render !== false) this.renderState(state);\r\n      if (options.history !== false && this.enable_history) {\r\n        this._history = [...this._history, state];\r\n        this._history_idx = this._history.length - 1;\r\n      }\r\n      if (typeof options.callback === 'function') options.callback(this.state);\r\n    }\r\n  }\r\n\r\n  private _history_prev = () => {\r\n    this._history_idx--;\r\n    if (this._history_idx >= 0) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = 0;\r\n    }\r\n  };\r\n\r\n  private _history_next = () => {\r\n    this._history_idx++;\r\n    if (this._history_idx < this._history.length) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = this._history.length - 1;\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    protected state?: T,\r\n    protected view?: View<T>,\r\n    protected update?: Update<T, E>,\r\n    protected options?) {\r\n  }\r\n\r\n  start = (element = null,\r\n    options: { render?: boolean, history?, global_event?: boolean } = { render: true }): Component<T> => {\r\n    return this.mount(element, { ...options, render: true });\r\n  }\r\n\r\n  public mount(element = null, options?: { render?: boolean, history?, global_event?: boolean}) {\r\n\r\n    console.assert(!this.element, 'Component already mounted.')\r\n    this.options = options = { ...this.options, ...options };\r\n    this.element = element;\r\n    this.global_event = options.global_event;\r\n    this.enable_history = !!options.history;\r\n\r\n    if (this.enable_history) {\r\n      this.on(options.history.prev || 'history-prev', this._history_prev);\r\n      this.on(options.history.next || 'history-next', this._history_next);\r\n    }\r\n    this.add_actions();\r\n    if (this.state === undefined) this.state = this['model'] != null ? this['model'] : {};\r\n    if (options.render) {\r\n      this.setState(this.state, { render: true, history: true });\r\n    } else {\r\n      this.setState(this.state, { render: false, history: true });\r\n    }\r\n    if (app['debug']) {\r\n      const id = typeof element === 'string' ? element : element.id;\r\n      componentCache[id] = componentCache[id] || [];\r\n      componentCache[id].push(this);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  is_global_event(name: string): boolean {\r\n    return name && (\r\n      this.global_event ||\r\n      this._global_events.indexOf(name) >= 0 ||\r\n      name.startsWith('#') || name.startsWith('/') || name.startsWith('@'));\r\n  }\r\n\r\n  add_action(name: string, action, options: ActionOptions = {}) {\r\n    if (!action || typeof action !== 'function') return;\r\n    if (options.global) this. _global_events.push(name);\r\n    this.on(name as any, (...p) => {\r\n      const newState = action(this.state, ...p);\r\n\r\n      app['debug'] && app.run('debug', {\r\n        component: this,\r\n        'event': name,\r\n        e: p,\r\n        state: this.state,\r\n        newState,\r\n        options\r\n      })\r\n\r\n      this.setState(newState, options)\r\n    }, options);\r\n  }\r\n\r\n  add_actions() {\r\n    const actions = this.update || {};\r\n    Reflect.getMetadataKeys(this).forEach(key => {\r\n      if (key.startsWith('apprun-update:')) {\r\n        const meta = Reflect.getMetadata(key, this)\r\n        actions[meta.name] = [this[meta.key].bind(this), meta.options];\r\n      }\r\n    })\r\n\r\n    const all = {};\r\n    if (Array.isArray(actions)) {\r\n      actions.forEach(act => {\r\n        const [name, action, opts] = act as ActionDef<T, E>;\r\n        const names = name.toString();\r\n        names.split(',').forEach(n => all[n.trim()] = [action, opts])\r\n      })\r\n    } else {\r\n      Object.keys(actions).forEach(name => {\r\n        const action = actions[name];\r\n        if (typeof action === 'function' || Array.isArray(action)) {\r\n          name.split(',').forEach(n => all[n.trim()] = action)\r\n        }\r\n      })\r\n    }\r\n\r\n    if (!all['.']) all['.'] = REFRESH;\r\n    Object.keys(all).forEach(name => {\r\n      const action = all[name];\r\n      if (typeof action === 'function') {\r\n        this.add_action(name, action);\r\n      } else if (Array.isArray(action)) {\r\n        this.add_action(name, action[0], action[1]);\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  public run(event: E, ...args) {\r\n    const name = event.toString();\r\n    return this.is_global_event(name) ?\r\n      app.run(name, ...args) :\r\n      this._app.run(name, ...args);\r\n  }\r\n\r\n  public on(event: E, fn: (...args) => void, options?: any) {\r\n    const name = event.toString();\r\n    this._actions.push({ name, fn });\r\n    return this.is_global_event(name) ?\r\n      app.on(name, fn, options) :\r\n      this._app.on(name, fn, options);\r\n  }\r\n\r\n  public unmount() {\r\n    this._actions.forEach(action => {\r\n      const { name, fn } = action;\r\n      this.is_global_event(name) ?\r\n        app.off(name, fn) :\r\n        this._app.off(name, fn);\r\n    });\r\n  }\r\n}\r\n","import app from './app';\n\nexport type Route = (url: string, ...args: any[]) => any;\n\nexport const ROUTER_EVENT: string = '//';\nexport const ROUTER_404_EVENT: string = '///';\n\nexport const route: Route = (url: string) => {\n  if (!url) url = '#';\n  if (url.startsWith('#')) {\n    const [name, ...rest] = url.split('/');\n    app.run(name, ...rest) || app.run(ROUTER_404_EVENT, name, ...rest);\n    app.run(ROUTER_EVENT, name, ...rest);\n  } else if (url.startsWith('/')) {\n    const [_, name, ...rest] = url.split('/');\n    app.run('/' + name, ...rest) || app.run(ROUTER_404_EVENT, '/' + name, ...rest);\n    app.run(ROUTER_EVENT, '/' + name, ...rest);\n  } else {\n    app.run(url) || app.run(ROUTER_404_EVENT, url);\n    app.run(ROUTER_EVENT, url);\n  }\n}\nexport default route;","import app from './app';\nimport { createElement, render, Fragment } from './vdom';\nimport { Component } from './component';\nimport { VNode, View, Action, Update, EventOptions, ActionOptions } from './types';\nimport { on, update, customElement } from './decorator';\nimport webComponent, { CustomElementOptions } from './web-component';\nimport { Route, route, ROUTER_EVENT, ROUTER_404_EVENT } from './router';\n\nexport interface IApp {\n  start<T, E=any>(element?: Element | string, model?: T, view?: View<T>, update?: Update<T, E>,\n    options?: { history?, rendered?: (state: T) => void}): Component<T, E>;\n  on(name: string, fn: (...args: any[]) => void, options?: any): void;\n  off(name: string, fn: (...args: any[]) => void): void;\n  run(name: string, ...args: any[]): number;\n  createElement(tag: string | Function, props, ...children): VNode | VNode[];\n  render(element: HTMLElement, node: VNode): void;\n  Fragment(props, ...children): any[];\n  route?: Route;\n  webComponent(name: string, componentClass, options?: CustomElementOptions): void;\n}\n\napp.createElement = createElement;\napp.render = render;\napp.Fragment = Fragment;\napp.webComponent = webComponent;\n\napp.start = <T, E=any>(element?: HTMLElement | string, model?: T,  view?: View<T>, update?: Update<T, E>,\n  options?: { history?, rendered?: (state: T) => void }) : Component<T, E> => {\n    const opts = {...options, render: true, global_event: true };\n    const component = new Component<T, E>(model, view, update);\n    if (options && options.rendered) component.rendered = options.rendered;\n    component.mount(element, opts);\n    return component;\n};\n\nconst NOOP = _ => {/* Intentionally empty */ }\napp.on('$', NOOP);\napp.on('debug', _ => NOOP);\napp.on(ROUTER_EVENT, NOOP);\napp.on('#', NOOP);\napp['route'] = route;\napp.on('route', url => app['route'] && app['route'](url));\n\nif (typeof document === 'object') {\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    if (app['route'] === route) {\n      window.onpopstate = () => route(location.hash);\n      route(location.hash);\n    }\n  });\n}\n\nexport type StatelessComponent<T={}> = (args: T) => string | VNode | void;\nexport { app, Component, View, Action, Update, on, update, EventOptions, ActionOptions }\nexport { update as event };\nexport { ROUTER_EVENT, ROUTER_404_EVENT };\nexport { customElement, CustomElementOptions };\nexport default app as IApp;\n\nif (typeof window === 'object') {\n  window['Component'] = Component;\n  window['React'] = app;\n}\n\n\n","import { createElement, updateElement, Fragment } from './vdom-my';\nexport function render(element, html, parent?) {\n  updateElement(element, html, parent);\n}\nexport { createElement, Fragment };\n\n\n","import app from 'apprun';\nimport router from './router';\nexport default {\n    start: (config) => {\n        if (!config)\n            config = { nav: [], pages: [], eventRoot: '/' };\n        router(config);\n        config.layout && app.render(document.body, app.createElement(config.layout, Object.assign({}, config)));\n        const element = config.element || document.body;\n        config.pages.forEach(def => {\n            const [e, Comp] = def;\n            const component = new Comp().mount(element);\n            app.on(e, (...p) => component.run('.', ...p));\n        });\n    }\n};\n","import app from 'apprun';\nexport default ({ eventRoot, pages }) => {\n    const root = eventRoot || '/';\n    const events = pages.map(p => {\n        const event = p[0].replace(/^\\/|\\#/, '');\n        return `${root}${event}/`;\n    }).sort((a, b) => b.split('/').length - a.split('/').length);\n    const route = (url, e) => {\n        e && e.preventDefault();\n        url = url.replace(/\\/$/, \"\") + '/';\n        let event = url;\n        for (let i = 0; i < events.length; i++) {\n            if (url.startsWith(events[i])) {\n                event = events[i];\n                break;\n            }\n        }\n        const params = url.replace(event, '').split('/').filter(p => p.length > 0);\n        event = event.replace(/\\/$/, '').substring(root.length);\n        event = root[0] + event;\n        if (!app.run(event, ...params))\n            app.run(`${root[0]}_404`);\n    };\n    app['route'] = route; // overwrite apprun's default router\n    if (root.startsWith('#')) {\n        document.addEventListener(\"DOMContentLoaded\", () => {\n            window.onpopstate = () => route(location.hash);\n            route(location.hash);\n        });\n    }\n    else if (root.startsWith('/')) {\n        document.addEventListener(\"DOMContentLoaded\", () => {\n            window.onpopstate = () => route(location.pathname);\n            route(location.pathname);\n        });\n        window.onclick = e => linkClick(e);\n        const linkClick = e => {\n            const menu = e.target;\n            let url = menu.href;\n            if (url && url.startsWith(document.location.origin)) {\n                e.preventDefault();\n                history.pushState(null, \"\", menu.pathname);\n                route(menu.pathname);\n            }\n        };\n    }\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","export default __webpack_public_path__ + \"style.css\";","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","const { defaults } = require('./defaults.js');\nconst { block } = require('./rules.js');\nconst {\n  rtrim,\n  splitCells,\n  escape\n} = require('./helpers.js');\n\n/**\n * Block Lexer\n */\nmodule.exports = class Lexer {\n  constructor(options) {\n    this.tokens = [];\n    this.tokens.links = Object.create(null);\n    this.options = options || defaults;\n    this.rules = block.normal;\n\n    if (this.options.pedantic) {\n      this.rules = block.pedantic;\n    } else if (this.options.gfm) {\n      this.rules = block.gfm;\n    }\n  }\n\n  /**\n   * Expose Block Rules\n   */\n  static get rules() {\n    return block;\n  }\n\n  /**\n   * Static Lex Method\n   */\n  static lex(src, options) {\n    const lexer = new Lexer(options);\n    return lexer.lex(src);\n  };\n\n  /**\n   * Preprocessing\n   */\n  lex(src) {\n    src = src\n      .replace(/\\r\\n|\\r/g, '\\n')\n      .replace(/\\t/g, '    ');\n\n    return this.token(src, true);\n  };\n\n  /**\n   * Lexing\n   */\n  token(src, top) {\n    src = src.replace(/^ +$/gm, '');\n    let next,\n      loose,\n      cap,\n      bull,\n      b,\n      item,\n      listStart,\n      listItems,\n      t,\n      space,\n      i,\n      tag,\n      l,\n      isordered,\n      istask,\n      ischecked;\n\n    while (src) {\n      // newline\n      if (cap = this.rules.newline.exec(src)) {\n        src = src.substring(cap[0].length);\n        if (cap[0].length > 1) {\n          this.tokens.push({\n            type: 'space'\n          });\n        }\n      }\n\n      // code\n      if (cap = this.rules.code.exec(src)) {\n        const lastToken = this.tokens[this.tokens.length - 1];\n        src = src.substring(cap[0].length);\n        // An indented code block cannot interrupt a paragraph.\n        if (lastToken && lastToken.type === 'paragraph') {\n          lastToken.text += '\\n' + cap[0].trimRight();\n        } else {\n          cap = cap[0].replace(/^ {4}/gm, '');\n          this.tokens.push({\n            type: 'code',\n            codeBlockStyle: 'indented',\n            text: !this.options.pedantic\n              ? rtrim(cap, '\\n')\n              : cap\n          });\n        }\n        continue;\n      }\n\n      // fences\n      if (cap = this.rules.fences.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'code',\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: cap[3] || ''\n        });\n        continue;\n      }\n\n      // heading\n      if (cap = this.rules.heading.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'heading',\n          depth: cap[1].length,\n          text: cap[2]\n        });\n        continue;\n      }\n\n      // table no leading pipe (gfm)\n      if (cap = this.rules.nptable.exec(src)) {\n        item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          src = src.substring(cap[0].length);\n\n          for (i = 0; i < item.align.length; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          for (i = 0; i < item.cells.length; i++) {\n            item.cells[i] = splitCells(item.cells[i], item.header.length);\n          }\n\n          this.tokens.push(item);\n\n          continue;\n        }\n      }\n\n      // hr\n      if (cap = this.rules.hr.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'hr'\n        });\n        continue;\n      }\n\n      // blockquote\n      if (cap = this.rules.blockquote.exec(src)) {\n        src = src.substring(cap[0].length);\n\n        this.tokens.push({\n          type: 'blockquote_start'\n        });\n\n        cap = cap[0].replace(/^ *> ?/gm, '');\n\n        // Pass `top` to keep the current\n        // \"toplevel\" state. This is exactly\n        // how markdown.pl works.\n        this.token(cap, top);\n\n        this.tokens.push({\n          type: 'blockquote_end'\n        });\n\n        continue;\n      }\n\n      // list\n      if (cap = this.rules.list.exec(src)) {\n        src = src.substring(cap[0].length);\n        bull = cap[2];\n        isordered = bull.length > 1;\n\n        listStart = {\n          type: 'list_start',\n          ordered: isordered,\n          start: isordered ? +bull : '',\n          loose: false\n        };\n\n        this.tokens.push(listStart);\n\n        // Get each top-level item.\n        cap = cap[0].match(this.rules.item);\n\n        listItems = [];\n        next = false;\n        l = cap.length;\n        i = 0;\n\n        for (; i < l; i++) {\n          item = cap[i];\n\n          // Remove the list item's bullet\n          // so it is seen as the next token.\n          space = item.length;\n          item = item.replace(/^ *([*+-]|\\d+\\.) */, '');\n\n          // Outdent whatever the\n          // list item contains. Hacky.\n          if (~item.indexOf('\\n ')) {\n            space -= item.length;\n            item = !this.options.pedantic\n              ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n              : item.replace(/^ {1,4}/gm, '');\n          }\n\n          // Determine whether the next list item belongs here.\n          // Backpedal if it does not belong in this list.\n          if (i !== l - 1) {\n            b = block.bullet.exec(cap[i + 1])[0];\n            if (bull.length > 1 ? b.length === 1\n              : (b.length > 1 || (this.options.smartLists && b !== bull))) {\n              src = cap.slice(i + 1).join('\\n') + src;\n              i = l - 1;\n            }\n          }\n\n          // Determine whether item is loose or not.\n          // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n          // for discount behavior.\n          loose = next || /\\n\\n(?!\\s*$)/.test(item);\n          if (i !== l - 1) {\n            next = item.charAt(item.length - 1) === '\\n';\n            if (!loose) loose = next;\n          }\n\n          if (loose) {\n            listStart.loose = true;\n          }\n\n          // Check for task list items\n          istask = /^\\[[ xX]\\] /.test(item);\n          ischecked = undefined;\n          if (istask) {\n            ischecked = item[1] !== ' ';\n            item = item.replace(/^\\[[ xX]\\] +/, '');\n          }\n\n          t = {\n            type: 'list_item_start',\n            task: istask,\n            checked: ischecked,\n            loose: loose\n          };\n\n          listItems.push(t);\n          this.tokens.push(t);\n\n          // Recurse.\n          this.token(item, false);\n\n          this.tokens.push({\n            type: 'list_item_end'\n          });\n        }\n\n        if (listStart.loose) {\n          l = listItems.length;\n          i = 0;\n          for (; i < l; i++) {\n            listItems[i].loose = true;\n          }\n        }\n\n        this.tokens.push({\n          type: 'list_end'\n        });\n\n        continue;\n      }\n\n      // html\n      if (cap = this.rules.html.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: this.options.sanitize\n            ? 'paragraph'\n            : 'html',\n          pre: !this.options.sanitizer\n            && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0]\n        });\n        continue;\n      }\n\n      // def\n      if (top && (cap = this.rules.def.exec(src))) {\n        src = src.substring(cap[0].length);\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        if (!this.tokens.links[tag]) {\n          this.tokens.links[tag] = {\n            href: cap[2],\n            title: cap[3]\n          };\n        }\n        continue;\n      }\n\n      // table (gfm)\n      if (cap = this.rules.table.exec(src)) {\n        item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          src = src.substring(cap[0].length);\n\n          for (i = 0; i < item.align.length; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          for (i = 0; i < item.cells.length; i++) {\n            item.cells[i] = splitCells(\n              item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''),\n              item.header.length);\n          }\n\n          this.tokens.push(item);\n\n          continue;\n        }\n      }\n\n      // lheading\n      if (cap = this.rules.lheading.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'heading',\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1]\n        });\n        continue;\n      }\n\n      // top-level paragraph\n      if (top && (cap = this.rules.paragraph.exec(src))) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'paragraph',\n          text: cap[1].charAt(cap[1].length - 1) === '\\n'\n            ? cap[1].slice(0, -1)\n            : cap[1]\n        });\n        continue;\n      }\n\n      // text\n      if (cap = this.rules.text.exec(src)) {\n        // Top-level should never reach here.\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'text',\n          text: cap[0]\n        });\n        continue;\n      }\n\n      if (src) {\n        throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n      }\n    }\n\n    return this.tokens;\n  };\n};\n","const Renderer = require('./Renderer.js');\nconst Slugger = require('./Slugger.js');\nconst InlineLexer = require('./InlineLexer.js');\nconst TextRenderer = require('./TextRenderer.js');\nconst { defaults } = require('./defaults.js');\nconst {\n  merge,\n  unescape\n} = require('./helpers.js');\n\n/**\n * Parsing & Compiling\n */\nmodule.exports = class Parser {\n  constructor(options) {\n    this.tokens = [];\n    this.token = null;\n    this.options = options || defaults;\n    this.options.renderer = this.options.renderer || new Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.slugger = new Slugger();\n  }\n\n  /**\n   * Static Parse Method\n   */\n  static parse(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parse(tokens);\n  };\n\n  /**\n   * Parse Loop\n   */\n  parse(tokens) {\n    this.inline = new InlineLexer(tokens.links, this.options);\n    // use an InlineLexer with a TextRenderer to extract pure text\n    this.inlineText = new InlineLexer(\n      tokens.links,\n      merge({}, this.options, { renderer: new TextRenderer() })\n    );\n    this.tokens = tokens.reverse();\n\n    let out = '';\n    while (this.next()) {\n      out += this.tok();\n    }\n\n    return out;\n  };\n\n  /**\n   * Next Token\n   */\n  next() {\n    this.token = this.tokens.pop();\n    return this.token;\n  };\n\n  /**\n   * Preview Next Token\n   */\n  peek() {\n    return this.tokens[this.tokens.length - 1] || 0;\n  };\n\n  /**\n   * Parse Text Tokens\n   */\n  parseText() {\n    let body = this.token.text;\n\n    while (this.peek().type === 'text') {\n      body += '\\n' + this.next().text;\n    }\n\n    return this.inline.output(body);\n  };\n\n  /**\n   * Parse Current Token\n   */\n  tok() {\n    let body = '';\n    switch (this.token.type) {\n      case 'space': {\n        return '';\n      }\n      case 'hr': {\n        return this.renderer.hr();\n      }\n      case 'heading': {\n        return this.renderer.heading(\n          this.inline.output(this.token.text),\n          this.token.depth,\n          unescape(this.inlineText.output(this.token.text)),\n          this.slugger);\n      }\n      case 'code': {\n        return this.renderer.code(this.token.text,\n          this.token.lang,\n          this.token.escaped);\n      }\n      case 'table': {\n        let header = '',\n          i,\n          row,\n          cell,\n          j;\n\n        // header\n        cell = '';\n        for (i = 0; i < this.token.header.length; i++) {\n          cell += this.renderer.tablecell(\n            this.inline.output(this.token.header[i]),\n            { header: true, align: this.token.align[i] }\n          );\n        }\n        header += this.renderer.tablerow(cell);\n\n        for (i = 0; i < this.token.cells.length; i++) {\n          row = this.token.cells[i];\n\n          cell = '';\n          for (j = 0; j < row.length; j++) {\n            cell += this.renderer.tablecell(\n              this.inline.output(row[j]),\n              { header: false, align: this.token.align[j] }\n            );\n          }\n\n          body += this.renderer.tablerow(cell);\n        }\n        return this.renderer.table(header, body);\n      }\n      case 'blockquote_start': {\n        body = '';\n\n        while (this.next().type !== 'blockquote_end') {\n          body += this.tok();\n        }\n\n        return this.renderer.blockquote(body);\n      }\n      case 'list_start': {\n        body = '';\n        const ordered = this.token.ordered,\n          start = this.token.start;\n\n        while (this.next().type !== 'list_end') {\n          body += this.tok();\n        }\n\n        return this.renderer.list(body, ordered, start);\n      }\n      case 'list_item_start': {\n        body = '';\n        const loose = this.token.loose;\n        const checked = this.token.checked;\n        const task = this.token.task;\n\n        if (this.token.task) {\n          if (loose) {\n            if (this.peek().type === 'text') {\n              const nextToken = this.peek();\n              nextToken.text = this.renderer.checkbox(checked) + ' ' + nextToken.text;\n            } else {\n              this.tokens.push({\n                type: 'text',\n                text: this.renderer.checkbox(checked)\n              });\n            }\n          } else {\n            body += this.renderer.checkbox(checked);\n          }\n        }\n\n        while (this.next().type !== 'list_item_end') {\n          body += !loose && this.token.type === 'text'\n            ? this.parseText()\n            : this.tok();\n        }\n        return this.renderer.listitem(body, task, checked);\n      }\n      case 'html': {\n        // TODO parse inline content if parameter markdown=1\n        return this.renderer.html(this.token.text);\n      }\n      case 'paragraph': {\n        return this.renderer.paragraph(this.inline.output(this.token.text));\n      }\n      case 'text': {\n        return this.renderer.paragraph(this.parseText());\n      }\n      default: {\n        const errMsg = 'Token with \"' + this.token.type + '\" type was not found.';\n        if (this.options.silent) {\n          console.log(errMsg);\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n  };\n};\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"about\">About</h1>\n<p>This is a page made from a markdown file. It also has embedded a web component to demonstrate async fetch.</p>\n<p><my-xkcd></my-xkcd></p>\n<p>Try edit src/pages/about.md file to change the content here.</p>\n`;\r\n    }\r\n}\r\n","import { app, Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = 'This is a page made from an AppRun component. It has embedded a counter web component.';\r\n        this.view = (state) => app.createElement(app.Fragment, null,\r\n            app.createElement(\"h1\", null, \"Contact\"),\r\n            app.createElement(\"div\", null, state),\r\n            app.createElement(\"my-counter\", null),\r\n            app.createElement(\"br\", null),\r\n            app.createElement(\"br\", null),\r\n            app.createElement(\"div\", null, \"Try edit src/pages/contact.tsx file to change the content here.\"));\r\n    }\r\n}\r\n","import { app, Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        // redirect home page to README.md\r\n        this.view = _ => { app.run('/README'); };\r\n        this.rendered = _ => { console.log(_); };\r\n    }\r\n}\r\n","import { app, Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => { app.run('/README'); };\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"hyperblog-pilot-built-with-apprun\">HyperBlog Pilot built with AppRun</h1>\n<p>This is an application built using <a href=\"https://github.com/yysun/apprun-site\">AppRun Site</a>, an framework for building <a href=\"https://github.com/yysun/apprun\">AppRun</a> applications.</p>\n<p>It incotporates <a href=\"https://github.com/gothinkster/apprun-realworld-example-app\">AppRun RealWorld example</a>\n<img src=\"https://github.com/gothinkster/apprun-realworld-example-app/raw/master/logo.png\" alt=\"alt text\" title=\"Logo Title Text 1\"> as is and adds a switch that turns the application into a decentralized, offline-first, trully serverless, People-centered Capability enabling them ti run their own social indieweb blogging site, where their retain ownership and control over their contributions and can span and control their own social network of followers.</p>\n<h2 id=\"features\">Features</h2>\n<ul>\n<li>Progressive Web App (PWA) - support offline</li>\n<li>Single Page App (SPA) - routing using / or #</li>\n<li>4 built-in layouts and bring your own</li>\n<li>Compile html, markdown pages to AppRun components</li>\n<li>Auto generate the index of pages</li>\n<li>Build app logic using AppRun/Web components</li>\n<li>Targets ES5 or ES Module</li>\n<li>Extensible through plugins (WIP)</li>\n</ul>\n<h2 id=\"project-structure\">Project Structure</h2>\n<p>This app has the following structure.</p>\n<pre><code>public/\nsrc/\n  components/\n  layout/\n  layout-bootstrap/\n  layout-coreui/\n  layout-material/\n  pages/\n    home.tsx\n    contact.tsx\n    about.tsx\n  index.tsx   &lt;=== main entry\n  tsconfig.json\n.gitignore\npackage.json\nwebpack.config.js\n</code></pre>\n<h2 id=\"run-the-application\">Run the Application</h2>\n<p>Use <em>npm</em> commands</p>\n<ul>\n<li>Use <em>npm install</em> to install apprun, typescript and webpack</li>\n<li>Use <em>npm start</em> to start the dev server</li>\n<li>Use <em>npm run build</em> to build for production</li>\n</ul>\n<h2 id=\"public-directory\">Public Directory</h2>\n<p>The <strong>public</strong> directory contains the files you can deploy to your hosting server after running <em>npm run build</em>.</p>\n<h2 id=\"layout\">Layout</h2>\n<p>There are four layouts included under the <strong>src/</strong> directory for you to try out.</p>\n<ul>\n<li>Default - best for documentation site</li>\n<li>Bootstrap - start point of bootstrap</li>\n<li>CoreUI - best for admin UI / business apps</li>\n<li>Material Design - best for mobile web app</li>\n</ul>\n<h3 id=\"switch-layouts\">Switch Layouts</h3>\n<p>You can rename the layout directory to switch the layouts.</p>\n<ul>\n<li>\n<p>To use the bootstrap layout, rename <em>layout-bootstrap</em> to <em>layout</em></p>\n</li>\n<li>\n<p>To use the coreUI layout, rename <em>layout-coreui</em> to <em>layout</em></p>\n</li>\n<li>\n<p>To use the material layout, rename <em>layout-material</em> to <em>layout</em></p>\n</li>\n</ul>\n<h3 id=\"use-your-own-layout\">Use Your Own Layout</h3>\n<p>If you have your own design, you can create your own layout component and put it in the layout directory.</p>\n<h2 id=\"pages\">Pages</h2>\n<p>The pages are under the <strong>src/pages</strong> directory. The pages can be AppRun components, HTML files or markdown files.</p>\n<p>There are sample pages:</p>\n<ul>\n<li>Home: A page that redirects to /README.md</li>\n<li>Contact: An AppRun component page with a web component inside</li>\n<li>About: An markdown page has a web component to demonstrate async fetch</li>\n</ul>\n<blockquote>\n<p>Try to edit the sample pages. And add or delete some pages. If you have started the app using <em>npm start</em>, you changes should be displayed in the browser automatically.</p>\n</blockquote>\n<h2 id=\"pwa\">PWA</h2>\n<p>This application includes a service worker from <a href=\"https://www.pwabuilder.com/\">PWA Builder</a>.</p>\n<p>The service worker is the advanced caching service worker that allows you to configure files and routes that are cached in different manners (pre-cache, network/server first, cache first, etc.).</p>\n<h3 id=\"register%2Fun-register-the-service-worker\">Register/Un-register the Service Worker</h3>\n<p>To register/un-register the service worker, include/exclude the script in the header section of the <strong>index.html</strong> file.</p>\n<pre><code>&lt;script src=&quot;sw-init.js&quot;&gt;&lt;/script&gt;\n</code></pre>\n<h3 id=\"configure-the-service-worker\">Configure the Service Worker</h3>\n<p>To configure the service worker, open and edit the <strong>public/sw.js</strong> file.</p>\n<pre><code class=\"language-javascript\">const CACHE = &quot;my-apprun-site&quot;;\nconst precacheFiles = [\n  &quot;index.html&quot;,\n  &quot;app.js&quot;,\n  &quot;style.css&quot;\n];\n\n// TODO: replace the following with the correct offline fallback page i.e.: const offlineFallbackPage = &quot;offline.html&quot;;\nconst offlineFallbackPage = &quot;offline.html&quot;;\n\nconst networkFirstPaths = [\n  /* Add an array of regex of paths that should go network first */\n  // Example: /\\/api\\/.*/\n];\n\nconst avoidCachingPaths = [\n  /* Add an array of regex of paths that shouldn't be cached */\n  // Example: /\\/api\\/.*/\n  /\\/sockjs-node\\/*/\n];\n\n</code></pre>\n<h2 id=\"ready-for-more-information\">Ready for More Information</h2>\n<p>Please visit <a href=\"https://yysun.github.io/apprun-site/\">AppRun Site Documentation</a>.</p>\n<p>Happy Coding.</p>\n`;\r\n    }\r\n}\r\n","import { app, Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = 'This is a page made from an AppRun component. It has embedded a counter web component.';\r\n        this.view = (state) => app.createElement(app.Fragment, null,\r\n            state,\r\n            app.createElement(\"div\", { id: \"my-app\" }));\r\n    }\r\n}\r\napp.on('#', (route, ...p) => {\r\n    debugger;\r\n    app.run(`#/${route || ''}`, ...p);\r\n});\r\n// app.run('/get-user');\r\n","import { app, Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = '404';\r\n        this.view = (state) => {\r\n            return app.createElement(\"div\", null, state);\r\n        };\r\n    }\r\n}\r\n","// this file is auto-generated\r\nimport _about_md_0 from './about_md';\r\nimport _contact_1 from './contact_tsx';\r\nimport _home_2 from './home_tsx';\r\nimport _index_3 from './index_tsx';\r\nimport _README_md_4 from './README_md';\r\nimport _signin_5 from './signin_tsx';\r\nimport _index_6 from './_404/index_tsx';\r\nexport default [\r\n    [\"/about\", _about_md_0],\r\n    [\"/contact\", _contact_1],\r\n    [\"/home\", _home_2],\r\n    [\"/\", _index_3],\r\n    [\"/README\", _README_md_4],\r\n    [\"/signin\", _signin_5],\r\n    [\"/_404\", _index_6],\r\n];\r\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { app, Component, customElement } from 'apprun';\r\nlet default_1 = class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = 0;\r\n        this.view = (state) => app.createElement(app.Fragment, null,\r\n            app.createElement(\"h1\", null, state),\r\n            app.createElement(\"button\", { \"$onclick\": \"-1\" }, \"-1\"),\r\n            app.createElement(\"button\", { \"$onclick\": \"+1\" }, \"+1\"));\r\n        this.update = {\r\n            '-1': state => state - 1,\r\n            '+1': state => state + 1\r\n        };\r\n    }\r\n};\r\ndefault_1 = __decorate([\r\n    customElement(\"my-counter\")\r\n], default_1);\r\nexport default default_1;\r\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { app, Component, customElement } from 'apprun';\r\nlet default_1 = class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {};\r\n        this.view = (state) => app.createElement(app.Fragment, null,\r\n            app.createElement(\"div\", null,\r\n                app.createElement(\"button\", { \"$onclick\": 'fetchComic' }, \"XKCD\")),\r\n            state.loading ? app.createElement(\"div\", null, \"loading ... \") : '',\r\n            state.comic && app.createElement(app.Fragment, null,\r\n                app.createElement(\"h3\", null, state.comic.title),\r\n                app.createElement(\"img\", { src: state.comic.url })));\r\n        this.update = {\r\n            'loading': (state, loading) => (Object.assign(Object.assign({}, state), { loading })),\r\n            'fetchComic': (_) => __awaiter(this, void 0, void 0, function* () {\r\n                this.run('loading', true);\r\n                const response = yield fetch('https://xkcd-imgs.herokuapp.com/');\r\n                const comic = yield response.json();\r\n                this.run('loading', false);\r\n                return { comic };\r\n            })\r\n        };\r\n    }\r\n};\r\ndefault_1 = __decorate([\r\n    customElement('my-xkcd')\r\n], default_1);\r\nexport default default_1;\r\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport app, { Component, on } from 'apprun';\r\nclass HeaderComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {};\r\n        this.view = state => {\r\n            debugger;\r\n            const user = state.user;\r\n            return (app.createElement(\"ul\", { class: \"nav navbar-nav pull-xs-right\" },\r\n                app.createElement(\"li\", { class: \"nav-item\" },\r\n                    app.createElement(\"a\", { class: \"nav-link active\", href: \"#/\" }, \"Home\")),\r\n                user && (app.createElement(\"li\", { class: \"nav-item\" },\r\n                    app.createElement(\"a\", { class: \"nav-link\", href: \"#/editor\" },\r\n                        app.createElement(\"i\", { class: \"ion-compose\" }),\r\n                        \"\\u00A0New Post\"))),\r\n                user && (app.createElement(\"li\", { class: \"nav-item\" },\r\n                    app.createElement(\"a\", { class: \"nav-link\", href: \"#/settings\" },\r\n                        app.createElement(\"i\", { class: \"ion-gear-a\" }),\r\n                        \"\\u00A0Settings\"))),\r\n                !user && (app.createElement(\"li\", { class: \"nav-item\" },\r\n                    app.createElement(\"a\", { class: \"nav-link\", href: \"#/login\" }, \"Sign In\"))),\r\n                !user && (app.createElement(\"li\", { class: \"nav-item\" },\r\n                    app.createElement(\"a\", { class: \"nav-link\", href: \"#/register\" }, \"Sign Up\"))),\r\n                user && (app.createElement(\"li\", { class: \"nav-item\" },\r\n                    app.createElement(\"a\", { class: \"nav-link\", href: `#/profile/${user.username}` }, user.username))),\r\n                user && (app.createElement(\"li\", { class: \"nav-item\" },\r\n                    app.createElement(\"a\", { class: \"nav-link\", href: \"#/logout\" }, \"Sign Out\")))));\r\n        };\r\n        this.setUser = (state, user) => (Object.assign(Object.assign({}, state), { user }));\r\n    }\r\n}\r\n__decorate([\r\n    on('/set-user')\r\n], HeaderComponent.prototype, \"setUser\", void 0);\r\nexport default new HeaderComponent().start('header');\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nlet access_token = (window && window.localStorage && window.localStorage.getItem('jwt')) || '';\r\nexport function getToken() {\r\n    return access_token;\r\n}\r\nexport function setToken(token) {\r\n    access_token = token;\r\n    if (!window.localStorage)\r\n        return;\r\n    if (token)\r\n        window.localStorage.setItem('jwt', token);\r\n    else\r\n        window.localStorage.removeItem('jwt');\r\n}\r\nexport function fetchAsync(method, url, body) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const headers = { 'Content-Type': 'application/json; charset=utf-8' };\r\n        if (access_token)\r\n            headers['Authorization'] = `Token ${access_token}`;\r\n        const response = yield window['fetch'](`${defaultBasePath}${url}`, {\r\n            method,\r\n            headers,\r\n            body: body && JSON.stringify(body)\r\n        });\r\n        if (response.status === 401) {\r\n            setToken(null);\r\n            throw new Error('401');\r\n        }\r\n        const result = yield response.json();\r\n        if (!response.ok)\r\n            throw result;\r\n        return result;\r\n    });\r\n}\r\nexport function get(url) {\r\n    return fetchAsync('GET', url);\r\n}\r\nexport function post(url, body) {\r\n    debugger;\r\n    return fetchAsync('POST', url, body);\r\n}\r\nexport function del(url) {\r\n    return fetchAsync('DELETE', url);\r\n}\r\nexport function put(url, body) {\r\n    return fetchAsync('PUT', url, body);\r\n}\r\nexport function toQueryString(obj) {\r\n    const parts = [];\r\n    for (var i in obj) {\r\n        if (obj.hasOwnProperty(i)) {\r\n            parts.push(encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]));\r\n        }\r\n    }\r\n    return parts.join('&');\r\n}\r\nexport function serializeObject(form) {\r\n    let obj = {};\r\n    if (typeof form == 'object' && form.nodeName == 'FORM') {\r\n        for (let i = 0; i < form.elements.length; i++) {\r\n            const field = form.elements[i];\r\n            if (field.name &&\r\n                field.type != 'file' &&\r\n                field.type != 'reset' &&\r\n                field.type != 'submit' &&\r\n                field.type != 'button') {\r\n                if (field.type == 'select-multiple') {\r\n                    obj[field.name] = '';\r\n                    let tempvalue = '';\r\n                    for (let j = 0; j < form.elements[i].options.length; j++) {\r\n                        if (field.options[j].selected)\r\n                            tempvalue += field.options[j].value + ';';\r\n                    }\r\n                    if (tempvalue.charAt(tempvalue.length - 1) === ';')\r\n                        obj[field.name] = tempvalue.substring(0, tempvalue.length - 1);\r\n                }\r\n                else if ((field.type != 'checkbox' && field.type != 'radio') || field.checked) {\r\n                    obj[field.name] = field.value;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return obj;\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport app from 'apprun';\r\n// Conduit API\r\nwindow['defaultBasePath'] = 'https://conduit.productionready.io/api';\r\nimport { toQueryString, serializeObject, getToken, setToken, get, post, del, put } from './fetch';\r\nexport { toQueryString, serializeObject };\r\nexport const tags = {\r\n    all: () => get('/tags')\r\n};\r\nexport const auth = {\r\n    current: () => (getToken() ? get('/user') : null),\r\n    signIn: (user) => post('/users/login', { user }),\r\n    register: (user) => post('/users', { user }),\r\n    save: user => put('/user', { user }),\r\n    authorized: () => (app['user'] ? true : app.run('#/login') && false) // app.run returns true if found event handlers\r\n};\r\nexport const articles = {\r\n    search: (request) => get(`/articles?${toQueryString(request)}`),\r\n    feed: (request) => get(`/articles/feed?${toQueryString(request)}`),\r\n    get: (slug) => get(`/articles/${slug}`),\r\n    delete: (slug) => del(`/articles/${slug}`),\r\n    favorite: (slug) => post(`/articles/${slug}/favorite`),\r\n    unfavorite: (slug) => del(`/articles/${slug}/favorite`),\r\n    update: (article) => put(`/articles/${article.slug}`, { article }),\r\n    create: (article) => post('/articles', { article })\r\n};\r\nexport const comments = {\r\n    create: (slug, comment) => post(`/articles/${slug}/comments`, { comment }),\r\n    delete: (slug, commentId) => del(`/articles/${slug}/comments/${commentId}`),\r\n    forArticle: (slug) => get(`/articles/${slug}/comments`)\r\n};\r\nexport const profile = {\r\n    get: (username) => get(`/profiles/${username}`),\r\n    follow: (username) => post(`/profiles/${username}/follow`),\r\n    unfollow: (username) => del(`/profiles/${username}/follow`)\r\n};\r\napp.on('/get-user', () => __awaiter(void 0, void 0, void 0, function* () {\r\n    try {\r\n        const current = yield auth.current();\r\n        if (current)\r\n            app.run('/set-user', current.user);\r\n    }\r\n    catch (_a) {\r\n        setToken(null);\r\n        document.location.reload(true);\r\n    }\r\n}));\r\napp.on('/set-user', user => {\r\n    app['user'] = user;\r\n    setToken(user ? user.token : null);\r\n});\r\napp.on('/toggle-follow', (author, component) => __awaiter(void 0, void 0, void 0, function* () {\r\n    if (!auth.authorized())\r\n        return;\r\n    const result = author.following\r\n        ? yield profile.unfollow(author.username)\r\n        : yield profile.follow(author.username);\r\n    component.run('update-follow', result.profile);\r\n}));\r\napp.on('/toggle-fav-article', (article, component) => __awaiter(void 0, void 0, void 0, function* () {\r\n    if (!auth.authorized())\r\n        return;\r\n    const result = article.favorited\r\n        ? yield articles.unfavorite(article.slug)\r\n        : yield articles.favorite(article.slug);\r\n    component.run('update-article', result.article);\r\n}));\r\n","import app from 'apprun';\r\nfunction Article(props) {\r\n    const article = props.article;\r\n    const favClass = article.favorited ? 'btn-primary' : 'btn-outline-primary';\r\n    return (app.createElement(\"div\", { class: \"article-preview\" },\r\n        app.createElement(\"div\", { class: \"article-meta\" },\r\n            app.createElement(\"a\", { href: article.author.image },\r\n                app.createElement(\"img\", { src: article.author.image })),\r\n            app.createElement(\"div\", { class: \"info\" },\r\n                app.createElement(\"a\", { href: `#/profile/${article.author.username}`, class: \"author\" }, article.author.username),\r\n                app.createElement(\"span\", { class: \"date\" }, new Date(article.updatedAt).toLocaleString())),\r\n            app.createElement(\"button\", { class: `btn btn-sm pull-xs-right ${favClass}`, onclick: e => app.run('toggle-fav-article', article, props.component) },\r\n                app.createElement(\"i\", { class: \"ion-heart\" }),\r\n                \" \",\r\n                article.favoritesCount)),\r\n        app.createElement(\"a\", { href: `#/article/${article.slug}`, class: \"preview-link\" },\r\n            app.createElement(\"h1\", null, article.title),\r\n            app.createElement(\"p\", null, article.description),\r\n            app.createElement(\"span\", null, \"Read more...\"),\r\n            app.createElement(\"ul\", { class: \"tag-list\" }, article.tagList.map(tag => (app.createElement(\"li\", { class: \"tag-default tag-pill tag-outline\" },\r\n                app.createElement(\"a\", { href: `#/tag/${tag}` },\r\n                    tag,\r\n                    \" \"))))))));\r\n}\r\nexport default function ({ articles, component }) {\r\n    return articles.length ? (articles.map(article => app.createElement(Article, { article: article, component: component }))) : (app.createElement(\"div\", { class: \"article-preview\" }, \"No articles are here... yet.\"));\r\n}\r\n","import app from 'apprun';\r\nexport default function ({ max, selected, link }) {\r\n    const pages = new Array(max).fill(0);\r\n    return (app.createElement(\"nav\", null,\r\n        app.createElement(\"ul\", { class: \"pagination\" }, pages.map((page, idx) => (app.createElement(\"li\", { class: `page-item ${idx + 1 === selected ? 'active' : ''}` },\r\n            app.createElement(\"a\", { href: `${link}/${idx + 1}`, class: \"page-link\" }, idx + 1)))))));\r\n}\r\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport app, { Component, on } from 'apprun';\r\nimport { auth, tags, articles } from '../api';\r\nimport Articles from './article-list';\r\nimport Pages from './page-list';\r\nconst PAGE_SIZE = 10;\r\nconst Tag = ({ tag }) => (app.createElement(\"a\", { href: `#/tag/${tag}/1`, class: \"tag-pill tag-default\" }, tag));\r\nclass HomeComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {\r\n            type: '',\r\n            articles: [],\r\n            tags: [],\r\n            max: 1,\r\n            page: 1\r\n        };\r\n        this.view = state => {\r\n            const tag = state.type === 'tag' && state.tag ? `/${state.tag}` : '';\r\n            return (app.createElement(\"div\", { class: \"home-page\" },\r\n                app.createElement(\"div\", { class: \"banner\" },\r\n                    app.createElement(\"div\", { class: \"container\" },\r\n                        app.createElement(\"h1\", { class: \"logo-font\" }, \"conduit\"),\r\n                        app.createElement(\"p\", null, \"A place to share your knowledge.\"))),\r\n                app.createElement(\"div\", { class: \"container page\" },\r\n                    app.createElement(\"div\", { class: \"row\" },\r\n                        app.createElement(\"div\", { class: \"col-md-9\" },\r\n                            app.createElement(\"div\", { class: \"feed-toggle\" },\r\n                                app.createElement(\"ul\", { class: \"nav nav-pills outline-active\" },\r\n                                    app.createElement(\"li\", { class: \"nav-item\" },\r\n                                        app.createElement(\"a\", { class: `nav-link ${app['user'] ? '' : 'disabled'} ${state.type === 'feed' ? 'active' : ''}`, href: \"#/feed\" }, \"Your Feed\")),\r\n                                    app.createElement(\"li\", { class: \"nav-item\" },\r\n                                        app.createElement(\"a\", { class: `nav-link ${state.type === '' ? 'active' : ''}`, href: \"#/\" }, \"Global Feed\")),\r\n                                    state.tag ? (app.createElement(\"li\", { class: \"nav-item\" },\r\n                                        app.createElement(\"a\", { class: `nav-link ${state.type === 'tag' ? 'active' : ''}`, href: `#/tag/${state.tag}` },\r\n                                            \"#\",\r\n                                            state.tag))) : (''))),\r\n                            app.createElement(Articles, { articles: state.articles, component: this }),\r\n                            app.createElement(Pages, { max: Math.floor(state.max / PAGE_SIZE), selected: state.page, link: `#/${state.type}${tag}` })),\r\n                        app.createElement(\"div\", { class: \"col-md-3\" },\r\n                            app.createElement(\"div\", { class: \"sidebar\" },\r\n                                app.createElement(\"p\", null, \"Popular Tags\"),\r\n                                app.createElement(\"div\", { class: \"tag-list\" }, state.tags.map(tag => (app.createElement(Tag, { tag: tag }))))))))));\r\n        };\r\n        this.updateState = (state, type, page, tag) => __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                let tagList = state.tags.length ? { tags: state.tags } : yield tags.all();\r\n                page = parseInt(page) || 1;\r\n                tag = tag || state.tag;\r\n                const limit = PAGE_SIZE;\r\n                const offset = (page - 1) * PAGE_SIZE;\r\n                let feed;\r\n                switch (type) {\r\n                    case 'feed':\r\n                        if (!auth.authorized())\r\n                            return Object.assign(Object.assign({}, state), { articles: [], max: 0 });\r\n                        feed = yield articles.feed({ limit, offset });\r\n                        break;\r\n                    case 'tag':\r\n                        feed = yield articles.search({ tag, limit, offset });\r\n                        break;\r\n                    default:\r\n                        feed = yield articles.search({ limit, offset });\r\n                        break;\r\n                }\r\n                page = Math.min(page, Math.floor(feed.articlesCount / PAGE_SIZE) + 1);\r\n                return Object.assign(Object.assign({}, state), { tags: tagList.tags, type,\r\n                    page,\r\n                    tag, articles: feed.articles, max: feed.articlesCount });\r\n            }\r\n            catch ({ errors }) {\r\n                return Object.assign(Object.assign({}, state), { errors, articles: [], max: 0 });\r\n            }\r\n        });\r\n        this.root = (state, page) => __awaiter(this, void 0, void 0, function* () { return yield this.updateState(state, '', page); });\r\n        this.feed = (state, page) => __awaiter(this, void 0, void 0, function* () { return yield this.updateState(state, 'feed', page); });\r\n        this.tag = (state, tag, page) => __awaiter(this, void 0, void 0, function* () { return yield this.updateState(state, 'tag', page, tag); });\r\n        this.updateArticle = (state, article) => {\r\n            state.articles = state.articles.map(a => {\r\n                return a.slug === article.slug ? article : a;\r\n            });\r\n            return state;\r\n        };\r\n    }\r\n}\r\n__decorate([\r\n    on('#/')\r\n], HomeComponent.prototype, \"root\", void 0);\r\n__decorate([\r\n    on('#/feed')\r\n], HomeComponent.prototype, \"feed\", void 0);\r\n__decorate([\r\n    on('#/tag')\r\n], HomeComponent.prototype, \"tag\", void 0);\r\n__decorate([\r\n    on('update-article')\r\n], HomeComponent.prototype, \"updateArticle\", void 0);\r\nexport default new HomeComponent().mount('my-app');\r\n","import app from 'apprun';\r\nexport default function ({ errors }) {\r\n    return (app.createElement(\"ul\", { class: \"error-messages\" }, Object.keys(errors).map(key => (app.createElement(\"li\", null, `${key} ${errors[key]}`)))));\r\n}\r\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport app, { Component, on } from 'apprun';\r\nimport { auth, serializeObject } from '../api';\r\nimport Errors from './error-list';\r\nclass SigninComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {};\r\n        this.view = state => {\r\n            if (!state || state instanceof Promise)\r\n                return;\r\n            return (app.createElement(\"div\", { class: \"auth-page\" },\r\n                app.createElement(\"div\", { class: \"container page\" },\r\n                    app.createElement(\"div\", { class: \"row\" },\r\n                        app.createElement(\"div\", { class: \"col-md-6 offset-md-3 col-xs-12\" },\r\n                            app.createElement(\"h1\", { class: \"text-xs-center\" }, \"Sign In\"),\r\n                            app.createElement(\"p\", { class: \"text-xs-center\" },\r\n                                app.createElement(\"a\", { href: \"#/register\" }, \"Need an account?\")),\r\n                            state.errors && app.createElement(Errors, { errors: state.errors }),\r\n                            app.createElement(\"form\", { onsubmit: e => this.run('sign-in', e) },\r\n                                app.createElement(\"fieldset\", { class: \"form-group\" },\r\n                                    app.createElement(\"input\", { class: \"form-control form-control-lg\", type: \"text\", placeholder: \"Email\", name: \"email\" })),\r\n                                app.createElement(\"fieldset\", { class: \"form-group\" },\r\n                                    app.createElement(\"input\", { class: \"form-control form-control-lg\", type: \"password\", placeholder: \"Password\", name: \"password\" })),\r\n                                app.createElement(\"button\", { class: \"btn btn-lg btn-primary pull-xs-right\" }, \"Sign In\")))))));\r\n        };\r\n        this.login = state => (Object.assign(Object.assign({}, state), { messages: [], returnTo: document.location.hash }));\r\n        this.logout = state => {\r\n            app.run('/set-user', null);\r\n            document.location.hash = '#/';\r\n        };\r\n        this.signIn = (state, e) => __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                e.preventDefault();\r\n                debugger;\r\n                const session = yield auth.signIn(serializeObject(e.target));\r\n                app.run('/set-user', session.user);\r\n                const returnTo = (state.returnTo || '').replace(/\\#\\/login\\/?/, '');\r\n                if (!returnTo)\r\n                    document.location.hash = '#/feed';\r\n                else {\r\n                    app.run('route', returnTo);\r\n                    history.pushState(null, null, returnTo);\r\n                }\r\n            }\r\n            catch ({ errors }) {\r\n                return Object.assign(Object.assign({}, state), { errors });\r\n            }\r\n        });\r\n    }\r\n}\r\n__decorate([\r\n    on('#/login')\r\n], SigninComponent.prototype, \"login\", void 0);\r\n__decorate([\r\n    on('#/logout')\r\n], SigninComponent.prototype, \"logout\", void 0);\r\n__decorate([\r\n    on('sign-in')\r\n], SigninComponent.prototype, \"signIn\", void 0);\r\nexport default new SigninComponent().mount('my-app');\r\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport app, { Component, on } from 'apprun';\r\nimport { auth, serializeObject } from '../api';\r\nimport Errors from './error-list';\r\nclass RegisterComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {};\r\n        this.view = state => {\r\n            if (!state || state instanceof Promise)\r\n                return;\r\n            return (app.createElement(\"div\", { class: \"auth-page\" },\r\n                app.createElement(\"div\", { class: \"container page\" },\r\n                    app.createElement(\"div\", { class: \"row\" },\r\n                        app.createElement(\"div\", { class: \"col-md-6 offset-md-3 col-xs-12\" },\r\n                            app.createElement(\"h1\", { class: \"text-xs-center\" }, \"Sign Up\"),\r\n                            app.createElement(\"p\", { class: \"text-xs-center\" },\r\n                                app.createElement(\"a\", { href: \"#/login\" }, \"Have an account?\")),\r\n                            state.errors && app.createElement(Errors, { errors: state.errors }),\r\n                            app.createElement(\"form\", { onsubmit: e => this.run('register', e) },\r\n                                app.createElement(\"fieldset\", { class: \"form-group\" },\r\n                                    app.createElement(\"input\", { class: \"form-control form-control-lg\", type: \"text\", placeholder: \"Your Name\", name: \"username\" })),\r\n                                app.createElement(\"fieldset\", { class: \"form-group\" },\r\n                                    app.createElement(\"input\", { class: \"form-control form-control-lg\", type: \"text\", placeholder: \"Email\", name: \"email\" })),\r\n                                app.createElement(\"fieldset\", { class: \"form-group\" },\r\n                                    app.createElement(\"input\", { class: \"form-control form-control-lg\", type: \"password\", placeholder: \"Password\", name: \"password\" })),\r\n                                app.createElement(\"button\", { class: \"btn btn-lg btn-primary pull-xs-right\" }, \"Sign up\")))))));\r\n        };\r\n        this.register = (state, messages) => (Object.assign(Object.assign({}, state), { messages }));\r\n        this.submitRegistration = (state, e) => __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                e.preventDefault();\r\n                const session = yield auth.register(serializeObject(e.target));\r\n                app.run('#user', session.user);\r\n                app.run('route', '#/');\r\n            }\r\n            catch ({ errors }) {\r\n                return Object.assign(Object.assign({}, state), { errors });\r\n            }\r\n        });\r\n    }\r\n}\r\n__decorate([\r\n    on('#/register')\r\n], RegisterComponent.prototype, \"register\", void 0);\r\n__decorate([\r\n    on('register')\r\n], RegisterComponent.prototype, \"submitRegistration\", void 0);\r\nexport default new RegisterComponent().mount('my-app');\r\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport app, { Component, on } from 'apprun';\r\nimport { articles, profile } from '../api';\r\nimport Articles from './article-list';\r\nimport Pages from './page-list';\r\nconst PAGE_SIZE = 10;\r\nclass ProfileComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {\r\n            name: '',\r\n            type: 'articles',\r\n            articles: [],\r\n            page: 1\r\n        };\r\n        this.view = state => {\r\n            const profile = state.profile;\r\n            if (!profile)\r\n                return;\r\n            return (app.createElement(\"div\", { class: \"profile-page\" },\r\n                app.createElement(\"div\", { class: \"user-info\" },\r\n                    app.createElement(\"div\", { class: \"container\" },\r\n                        app.createElement(\"div\", { class: \"row\" },\r\n                            app.createElement(\"div\", { class: \"col-xs-12 col-md-10 offset-md-1\" },\r\n                                app.createElement(\"img\", { src: profile.image, class: \"user-img\" }),\r\n                                app.createElement(\"h4\", null, profile.username),\r\n                                app.createElement(\"p\", null, profile.bio),\r\n                                app.createElement(\"button\", { class: \"btn btn-sm btn-outline-secondary action-btn\", onclick: e => app.run('/toggle-follow', profile, this) }, profile.following ? (app.createElement(\"span\", null,\r\n                                    app.createElement(\"i\", { class: \"ion-minus-round\" }),\r\n                                    \" Unfollow \",\r\n                                    profile.username)) : (app.createElement(\"span\", null,\r\n                                    app.createElement(\"i\", { class: \"ion-plus-round\" }),\r\n                                    \" Follow \",\r\n                                    profile.username))))))),\r\n                app.createElement(\"div\", { class: \"container\" },\r\n                    app.createElement(\"div\", { class: \"row\" },\r\n                        app.createElement(\"div\", { class: \"col-xs-12 col-md-10 offset-md-1\" },\r\n                            app.createElement(\"div\", { class: \"articles-toggle\" },\r\n                                app.createElement(\"ul\", { class: \"nav nav-pills outline-active\" },\r\n                                    app.createElement(\"li\", { class: \"nav-item\" },\r\n                                        app.createElement(\"a\", { class: `nav-link ${state.type === 'articles' ? 'active' : ''}`, href: `#/profile/${profile.username}/articles/1` }, \"My Articles\")),\r\n                                    app.createElement(\"li\", { class: \"nav-item\" },\r\n                                        app.createElement(\"a\", { class: `nav-link ${state.type === 'favorites' ? 'active' : ''}`, href: `#/profile/${profile.username}/favorites/1` }, \"Favorited Articles\")))),\r\n                            app.createElement(Articles, { articles: state.articles, component: this }),\r\n                            app.createElement(Pages, { max: Math.floor(state.max / PAGE_SIZE), selected: state.page, link: `#/profile/${state.profile.username}/${state.type}` }))))));\r\n        };\r\n        this.updateState = (state, name, type, page) => __awaiter(this, void 0, void 0, function* () {\r\n            name = decodeURIComponent(name || state.name);\r\n            type = type || state.type;\r\n            page = parseInt(page) || state.page;\r\n            let newState = state;\r\n            if (name !== state.name) {\r\n                const profileResult = yield profile.get(name);\r\n                newState = Object.assign(Object.assign({}, newState), { profile: profileResult.profile });\r\n            }\r\n            if (name !== state.name || type !== state.type || page !== state.page) {\r\n                const limit = PAGE_SIZE;\r\n                const offset = (page - 1) * limit;\r\n                const articleResult = type === 'favorites'\r\n                    ? yield articles.search({ favorited: name, offset, limit })\r\n                    : yield articles.search({ author: name, offset, limit });\r\n                newState = Object.assign(Object.assign({}, newState), { name,\r\n                    type,\r\n                    page, articles: articleResult.articles, max: articleResult.articlesCount });\r\n            }\r\n            return newState;\r\n        });\r\n        this.root = (state, name, type, page) => this.updateState(state, name, type, page);\r\n        this.updateArticle = (state, article) => {\r\n            state.articles = state.articles.map(a => {\r\n                return a.slug === article.slug ? article : a;\r\n            });\r\n            return state;\r\n        };\r\n        this.updateFollow = (state, profile) => (Object.assign(Object.assign({}, state), { profile }));\r\n    }\r\n}\r\n__decorate([\r\n    on('#/profile')\r\n], ProfileComponent.prototype, \"root\", void 0);\r\n__decorate([\r\n    on('update-article')\r\n], ProfileComponent.prototype, \"updateArticle\", void 0);\r\n__decorate([\r\n    on('update-follow')\r\n], ProfileComponent.prototype, \"updateFollow\", void 0);\r\nexport default new ProfileComponent().mount('my-app');\r\n","import app from 'apprun';\r\nexport default function ({ title, body, ok, cancel, onOK, onCancel }) {\r\n    return (app.createElement(\"div\", { class: \"modal-open\" },\r\n        app.createElement(\"div\", { class: \"modal-dialog\", role: \"document\" },\r\n            app.createElement(\"div\", { class: \"modal-content\" },\r\n                app.createElement(\"div\", { class: \"modal-header\" },\r\n                    app.createElement(\"h5\", { class: \"modal-title\" },\r\n                        title,\r\n                        app.createElement(\"button\", { type: \"button\", class: \"close\", \"data-dismiss\": \"modal\", \"aria-label\": \"Close\", onclick: e => onCancel(e) },\r\n                            app.createElement(\"span\", { \"aria-hidden\": \"true\" }, \"\\u00D7\")))),\r\n                app.createElement(\"div\", { class: \"modal-body\" },\r\n                    app.createElement(\"p\", null, body)),\r\n                app.createElement(\"div\", { class: \"modal-footer\" },\r\n                    cancel && (app.createElement(\"button\", { type: \"button\", class: \"btn btn-secondary\", \"data-dismiss\": \"modal\", onclick: e => onCancel(e) }, cancel)),\r\n                    \"\\u00A0\\u00A0\",\r\n                    app.createElement(\"button\", { type: \"button\", class: \"btn btn-primary\", onclick: e => onOK(e) }, ok)))),\r\n        app.createElement(\"div\", { class: \"modal-backdrop show\", onclick: e => onCancel(e) })));\r\n}\r\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport app, { Component, on } from 'apprun';\r\nimport { serializeObject, auth } from '../api';\r\nimport Errors from './error-list';\r\nimport Modal from './modal';\r\nclass SettingsComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {};\r\n        this.view = state => {\r\n            const user = state.user;\r\n            if (!user)\r\n                return;\r\n            return (app.createElement(\"div\", { class: \"settings-page\" },\r\n                state.showModal ? (app.createElement(Modal, { title: \"Confirmation\", body: \"Your settings has been updated successfully.\", ok: \"OK\", cancel: \"Cancel\", onOK: e => this.run('ok', e), onCancel: e => this.run('cancel', e) })) : (''),\r\n                app.createElement(\"div\", { class: \"container page\" },\r\n                    app.createElement(\"div\", { class: \"row\" },\r\n                        app.createElement(\"div\", { class: \"col-md-6 offset-md-3 col-xs-12\" },\r\n                            state.errors && app.createElement(Errors, { errors: state.errors }),\r\n                            app.createElement(\"h1\", { class: \"text-xs-center\" }, \"Your Settings\"),\r\n                            app.createElement(\"form\", { onsubmit: e => this.run('submit-settings', e) },\r\n                                app.createElement(\"fieldset\", null,\r\n                                    app.createElement(\"fieldset\", { class: \"form-group\" },\r\n                                        app.createElement(\"input\", { class: \"form-control\", type: \"text\", placeholder: \"URL of profile picture\", name: \"image\", value: user.image })),\r\n                                    app.createElement(\"fieldset\", { class: \"form-group\" },\r\n                                        app.createElement(\"input\", { class: \"form-control form-control-lg\", type: \"text\", placeholder: \"Your Name\", name: \"username\", value: user.username })),\r\n                                    app.createElement(\"fieldset\", { class: \"form-group\" },\r\n                                        app.createElement(\"textarea\", { class: \"form-control form-control-lg\", rows: \"8\", placeholder: \"Short bio about you\", name: \"bio\" }, user.bio)),\r\n                                    app.createElement(\"fieldset\", { class: \"form-group\" },\r\n                                        app.createElement(\"input\", { class: \"form-control form-control-lg\", type: \"text\", placeholder: \"Email\", name: \"email\", value: user.email })),\r\n                                    app.createElement(\"fieldset\", { class: \"form-group\" },\r\n                                        app.createElement(\"input\", { class: \"form-control form-control-lg\", type: \"password\", placeholder: \"Password\", name: \"password\", value: user.password })),\r\n                                    app.createElement(\"button\", { class: \"btn btn-lg btn-primary pull-xs-right\" }, \"Update Settings\"))))))));\r\n        };\r\n        this.settings = state => {\r\n            if (!auth.authorized())\r\n                return;\r\n            return { user: app['user'] };\r\n        };\r\n        this.submitSettings = (state, e) => __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                e.preventDefault();\r\n                const user = serializeObject(e.target);\r\n                const result = yield auth.save(user);\r\n                app.run('#user', result.user);\r\n                return { showModal: true };\r\n            }\r\n            catch ({ errors }) {\r\n                return Object.assign(Object.assign({}, state), { errors });\r\n            }\r\n        });\r\n        this.ok = state => {\r\n            return { showModel: false };\r\n        };\r\n    }\r\n}\r\n__decorate([\r\n    on('#/settings')\r\n], SettingsComponent.prototype, \"settings\", void 0);\r\n__decorate([\r\n    on('submit-settings')\r\n], SettingsComponent.prototype, \"submitSettings\", void 0);\r\n__decorate([\r\n    on('ok, cancel')\r\n], SettingsComponent.prototype, \"ok\", void 0);\r\nexport default new SettingsComponent().mount('my-app');\r\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport app, { Component, on } from 'apprun';\r\nimport { serializeObject, articles, auth } from '../api';\r\nimport Errors from './error-list';\r\nclass EditorComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {};\r\n        this.view = state => {\r\n            if (!app['user'] || !state.article)\r\n                return;\r\n            const article = state.article;\r\n            return (app.createElement(\"div\", { class: \"editor-page\" },\r\n                app.createElement(\"div\", { class: \"container page\" },\r\n                    app.createElement(\"div\", { class: \"row\" },\r\n                        app.createElement(\"div\", { class: \"col-md-10 offset-md-1 col-xs-12\" },\r\n                            state.errors && app.createElement(Errors, { errors: state.errors }),\r\n                            app.createElement(\"form\", { onsubmit: e => this.run('submit-article', e) },\r\n                                article.slug && app.createElement(\"input\", { type: \"hidden\", name: \"slug\", value: article.slug }),\r\n                                app.createElement(\"fieldset\", null,\r\n                                    app.createElement(\"fieldset\", { class: \"form-group\" },\r\n                                        app.createElement(\"input\", { type: \"text\", class: \"form-control form-control-lg\", placeholder: \"Article Title\", name: \"title\", value: article.title })),\r\n                                    app.createElement(\"fieldset\", { class: \"form-group\" },\r\n                                        app.createElement(\"input\", { type: \"text\", class: \"form-control\", placeholder: \"What's this article about?\", name: \"description\", value: article.description })),\r\n                                    app.createElement(\"fieldset\", { class: \"form-group\" },\r\n                                        app.createElement(\"textarea\", { class: \"form-control\", rows: \"8\", placeholder: \"Write your article (in markdown)\", name: \"body\" }, article.body)),\r\n                                    app.createElement(\"fieldset\", { class: \"form-group\" },\r\n                                        app.createElement(\"input\", { type: \"text\", class: \"form-control\", placeholder: \"Enter tags\", name: \"tags\", value: article.tagList.join(', ') }),\r\n                                        app.createElement(\"div\", { class: \"tag-list\" })),\r\n                                    app.createElement(\"button\", { class: \"btn btn-lg pull-xs-right btn-primary\", type: \"submit\" }, \"Publish Article\"))))))));\r\n        };\r\n        this.root = (state, slug) => __awaiter(this, void 0, void 0, function* () {\r\n            if (!auth.authorized())\r\n                return;\r\n            let article;\r\n            if (slug) {\r\n                const result = yield articles.get(slug);\r\n                article = result.article;\r\n            }\r\n            article = article || { title: '', description: '', body: '', tagList: [] };\r\n            return { article };\r\n        });\r\n        this.submitArticle = (state, e) => __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                e.preventDefault();\r\n                debugger;\r\n                const article = serializeObject(e.target);\r\n                article.tagList = article.tags.split(',');\r\n                const result = article.slug ? yield articles.update(article) : yield articles.create(article);\r\n                document.location.hash = `#/article/${result.article.slug}`;\r\n            }\r\n            catch ({ errors }) {\r\n                return Object.assign(Object.assign({}, state), { errors });\r\n            }\r\n        });\r\n    }\r\n}\r\n__decorate([\r\n    on('#/editor')\r\n], EditorComponent.prototype, \"root\", void 0);\r\n__decorate([\r\n    on('submit-article')\r\n], EditorComponent.prototype, \"submitArticle\", void 0);\r\nexport default new EditorComponent().mount('my-app');\r\n","import app from 'apprun';\r\nimport * as marked from 'marked';\r\nfunction Comment({ comment }) {\r\n    return (app.createElement(\"div\", { class: \"card\" },\r\n        app.createElement(\"div\", { class: \"card-block\" },\r\n            app.createElement(\"p\", { class: \"card-text\" },\r\n                app.createElement(\"p\", null, `_html:${marked(comment.body, { sanitize: true })}`))),\r\n        app.createElement(\"div\", { class: \"card-footer\" },\r\n            app.createElement(\"a\", { class: \"comment-author\" },\r\n                app.createElement(\"img\", { src: comment.author.image, class: \"comment-author-img\" })),\r\n            \"\\u00A0\",\r\n            app.createElement(\"a\", { class: \"comment-author\", href: `#/profile/${comment.author.username}` }, comment.author.username),\r\n            app.createElement(\"span\", { class: \"date-posted\" }, new Date(comment.createdAt).toLocaleString()),\r\n            app['user'] && app['user'].username === comment.author.username && (app.createElement(\"span\", { class: \"mod-options\" },\r\n                app.createElement(\"i\", { class: \"ion-trash-a\", onclick: e => app.run('/delete-comment', comment) }))))));\r\n}\r\nexport default function ({ comments }) {\r\n    const user = app['user'];\r\n    return (app.createElement(\"div\", { class: \"row\" },\r\n        app.createElement(\"div\", { class: \"col-xs-12 col-md-8 offset-md-2\" },\r\n            !user ? (app.createElement(\"p\", null,\r\n                app.createElement(\"a\", { href: `#/login/${document.location.hash}` }, \"Sign in\"),\r\n                \" or\\u00A0\",\r\n                app.createElement(\"a\", { href: \"#/register\" }, \"sign up\"),\r\n                \" to add comments on this article.\")) : (app.createElement(\"form\", { class: \"card comment-form\", onsubmit: e => app.run('/new-comment', e) },\r\n                app.createElement(\"div\", { class: \"card-block\" },\r\n                    app.createElement(\"textarea\", { class: \"form-control\", placeholder: \"Write a comment...\", rows: \"3\", name: \"comment\" })),\r\n                app.createElement(\"div\", { class: \"card-footer\" },\r\n                    user.image ? (app.createElement(\"img\", { src: user.image, class: \"comment-author-img\" })) : (app.createElement(\"span\", null,\r\n                        \"@\",\r\n                        user.username)),\r\n                    app.createElement(\"button\", { class: \"btn btn-sm btn-primary\", type: \"submit\" }, \"Post Comment\")))),\r\n            comments.map(comment => (app.createElement(Comment, { comment: comment }))))));\r\n}\r\n","import app from 'apprun';\r\nexport default function ArticleMeta({ article, component }) {\r\n    const favClass = article.favorited ? 'btn-primary' : 'btn-outline-primary';\r\n    const followClass = article.author.following ? 'btn-secondary' : 'btn-outline-secondary';\r\n    return (app.createElement(\"div\", { class: \"article-meta\" },\r\n        app.createElement(\"a\", { href: article.author.image },\r\n            app.createElement(\"img\", { src: article.author.image })),\r\n        app.createElement(\"div\", { class: \"info\" },\r\n            app.createElement(\"a\", { href: `#/profile/${article.author.username}`, class: \"author\" }, article.author.username),\r\n            app.createElement(\"span\", { class: \"date\" }, new Date(article.updatedAt).toLocaleString())),\r\n        app['user'] && app['user'].username === article.author.username ? (app.createElement(\"span\", null,\r\n            app.createElement(\"button\", { class: \"btn btn-sm btn-outline-secondary\", onclick: e => component.run('edit-article', article) },\r\n                app.createElement(\"i\", { class: \"ion-edit\" }),\r\n                \"\\u00A0 Edit Article\"),\r\n            app.createElement(\"button\", { class: \"btn btn-sm btn-outline-secondary\", onclick: e => component.run('own-article', article) },\r\n                app.createElement(\"i\", { class: \"ion-ios-download-outline\" }),\r\n                \"\\u00A0 Own Article\"),\r\n            \"\\u00A0\\u00A0\",\r\n            app.createElement(\"button\", { class: \"btn btn-sm btn-outline-danger\", onclick: e => component.run('delete-article', article) },\r\n                app.createElement(\"i\", { class: \"ion-trash-o\" }),\r\n                \"\\u00A0 Delete Article\"))) : (app.createElement(\"span\", null,\r\n            app.createElement(\"button\", { class: `btn btn-sm ${followClass}`, onclick: e => app.run('/toggle-follow', article.author, component) }, article.author.following ? (app.createElement(\"span\", null,\r\n                app.createElement(\"i\", { class: \"ion-minus-round\" }),\r\n                \" Unfollow \",\r\n                article.author.username)) : (app.createElement(\"span\", null,\r\n                app.createElement(\"i\", { class: \"ion-plus-round\" }),\r\n                \" Follow \",\r\n                article.author.username))),\r\n            ' ',\r\n            \"\\u00A0\\u00A0\",\r\n            app.createElement(\"button\", { class: `btn btn-sm ${favClass}`, onclick: e => app.run('/toggle-fav-article', article, component) },\r\n                app.createElement(\"i\", { class: \"ion-heart\" }),\r\n                \"\\u00A0 Favorite Post \",\r\n                app.createElement(\"span\", { class: \"counter\" },\r\n                    \"(\",\r\n                    article.favoritesCount,\r\n                    \")\"))))));\r\n}\r\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport app, { Component, on } from 'apprun';\r\nimport { articles, comments } from '../api';\r\nimport Comments from './comment-list';\r\nimport ArticleMeta from './article-meta';\r\nimport Modal from './modal';\r\nimport * as marked from 'marked';\r\nclass ArticleComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {\r\n            article: null,\r\n            comments: []\r\n        };\r\n        this.view = state => {\r\n            const article = state.article;\r\n            if (!article)\r\n                return;\r\n            return (app.createElement(\"div\", { class: \"article-page\" },\r\n                state.deleting && (app.createElement(Modal, { title: \"Delete Article\", body: \"Are you sure you want to delete this article?\", ok: \"Delete\", cancel: \"No\", onOK: e => this.run('ok-delete-article', e), onCancel: e => this.run('cancel-delete-article', e) })),\r\n                app.createElement(\"div\", { class: \"banner\" },\r\n                    app.createElement(\"div\", { class: \"container\" },\r\n                        app.createElement(\"h1\", null, article.title),\r\n                        app.createElement(ArticleMeta, { article: article, component: this }))),\r\n                app.createElement(\"div\", { class: \"container page\" },\r\n                    app.createElement(\"div\", { class: \"row article-content\" },\r\n                        app.createElement(\"div\", { class: \"col-md-12\" },\r\n                            app.createElement(\"p\", null, `_html:${marked(article.body, { sanitize: true })}`),\r\n                            app.createElement(\"div\", { class: \"tag-list\" },\r\n                                app.createElement(\"br\", null),\r\n                                article.tagList.map(tag => (app.createElement(\"li\", { class: \"tag-default tag-pill tag-outline\" },\r\n                                    app.createElement(\"a\", { href: `#/tag/${tag}` },\r\n                                        tag,\r\n                                        \" \"))))))),\r\n                    app.createElement(\"hr\", null),\r\n                    app.createElement(\"div\", { class: \"article-actions\" },\r\n                        app.createElement(ArticleMeta, { article: article, component: this })),\r\n                    app.createElement(Comments, { comments: state.comments })),\r\n                app.createElement(\"b\", null, { article })));\r\n        };\r\n        this.root = (state, slug) => __awaiter(this, void 0, void 0, function* () {\r\n            let article = state.article;\r\n            let _comments = state.comments;\r\n            if (!article || article.slug !== slug) {\r\n                const result = yield articles.get(slug);\r\n                article = result.article;\r\n                const commentsResponse = yield comments.forArticle(article.slug);\r\n                _comments = commentsResponse.comments;\r\n            }\r\n            return Object.assign(Object.assign({}, state), { article, comments: _comments });\r\n        });\r\n        this.newComment = (state, e) => __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                e.preventDefault();\r\n                const comment = e.target['comment'].value;\r\n                if (!comment)\r\n                    return;\r\n                yield comments.create(state.article.slug, { body: comment });\r\n                const commentsResponse = yield comments.forArticle(state.article.slug);\r\n                return Object.assign(Object.assign({}, state), { comments: commentsResponse.comments });\r\n            }\r\n            catch ({ errors }) {\r\n                return Object.assign(Object.assign({}, state), { errors });\r\n            }\r\n        });\r\n        this.deleteComment = (state, comment) => __awaiter(this, void 0, void 0, function* () {\r\n            yield comments.delete(this.state.article.slug, comment.id);\r\n            const commentsResponse = yield comments.forArticle(state.article.slug);\r\n            return Object.assign(Object.assign({}, state), { comments: commentsResponse.comments });\r\n        });\r\n        this.updateArticle = (state, article) => (Object.assign(Object.assign({}, state), { article }));\r\n        this.updateFollow = (state, author) => {\r\n            state.article.author = author;\r\n            return state;\r\n        };\r\n        this.editArticle = (state, article) => {\r\n            document.location.hash = `#/editor/${article.slug}`;\r\n        };\r\n        this.deleteArticle = (state, article) => (Object.assign(Object.assign({}, state), { deleting: true }));\r\n        this.okDelete = (state, e) => {\r\n            articles.delete(state.article.slug);\r\n            document.location.hash = '#/';\r\n            return Object.assign(Object.assign({}, state), { deleting: false });\r\n        };\r\n        this.cancelDelete = (state, article) => (Object.assign(Object.assign({}, state), { deleting: false }));\r\n        this.ownArticle = (state, article) => {\r\n            console.log(article);\r\n            let body = marked(article.body, { sanitize: true });\r\n            let dot = { a: article.slug,\r\n                t: article.title,\r\n                s: article.createdAt,\r\n                ps: { author: article.author.username }\r\n            };\r\n            console.log(dot);\r\n            localStorage[dot.a] = JSON.stringify(dot);\r\n            return Object.assign(Object.assign({}, state), { owned: true });\r\n        };\r\n    }\r\n}\r\n__decorate([\r\n    on('#/article')\r\n], ArticleComponent.prototype, \"root\", void 0);\r\n__decorate([\r\n    on('/new-comment')\r\n], ArticleComponent.prototype, \"newComment\", void 0);\r\n__decorate([\r\n    on('/delete-comment')\r\n], ArticleComponent.prototype, \"deleteComment\", void 0);\r\n__decorate([\r\n    on('update-article')\r\n], ArticleComponent.prototype, \"updateArticle\", void 0);\r\n__decorate([\r\n    on('update-follow')\r\n], ArticleComponent.prototype, \"updateFollow\", void 0);\r\n__decorate([\r\n    on('edit-article')\r\n], ArticleComponent.prototype, \"editArticle\", void 0);\r\n__decorate([\r\n    on('delete-article')\r\n], ArticleComponent.prototype, \"deleteArticle\", void 0);\r\n__decorate([\r\n    on('ok-delete-article')\r\n], ArticleComponent.prototype, \"okDelete\", void 0);\r\n__decorate([\r\n    on('cancel-delete-article')\r\n], ArticleComponent.prototype, \"cancelDelete\", void 0);\r\n__decorate([\r\n    on('own-article')\r\n], ArticleComponent.prototype, \"ownArticle\", void 0);\r\nexport default new ArticleComponent().mount('my-app');\r\n","import app from 'apprun-site';\r\nimport appr from 'apprun';\r\nimport layout from './layout';\r\nimport pages from './_lib';\r\nimport './components/counter';\r\nimport './components/my-xkcd';\r\nimport './components/header';\r\nimport './components/home';\r\nimport './components/signin';\r\nimport './components/register';\r\nimport './components/profile';\r\nimport './components/settings';\r\nimport './components/editor';\r\nimport './components/article';\r\nconst site = {\r\n    title: 'HyperBlog Pilot built with AppRun ',\r\n    element: 'my-app',\r\n    nav: [\r\n        { \"text\": \"Home\", \"link\": \"/README\" },\r\n    ],\r\n    sidebar: [],\r\n    layout,\r\n    pages,\r\n    eventRoot: '#'\r\n};\r\napp.start(site);\r\nappr.run('/get-user');\r\n","import app from 'apprun';\r\nexport default ({ title, element, nav, sidebar }) => app.createElement(app.Fragment, null,\r\n    app.createElement(\"nav\", { class: \"main-nav\", markdown: \"0\" },\r\n        app.createElement(\"a\", { class: \"nav-title\", href: \"/\" }, title),\r\n        app.createElement(\"div\", { class: \"flex\" }),\r\n        app.createElement(\"div\", { id: \"header\" }),\r\n        nav.map(item => app.createElement(\"a\", { class: \"nav-item\", href: item.link }, item.text)),\r\n        app.createElement(\"a\", { class: \"icon\", href: \"https://github.com/apprunjs/apprun-starter\", title: \"GitHub\" },\r\n            app.createElement(\"svg\", { version: \"1.1\", xmlns: \"http://www.w3.org/2000/svg\", width: \"24\", height: \"24\", fill: \"currentcolor\" },\r\n                app.createElement(\"path\", { d: \"M12,2C6.48,2,2,6.59,2,12.25c0,4.53,2.87,8.37,6.84,9.73c0.5,0.09,0.68-0.22,0.68-0.49c0-0.24-0.01-0.89-0.01-1.74c-2.78,0.62-3.37-1.37-3.37-1.37c-0.45-1.18-1.11-1.5-1.11-1.5c-0.91-0.64,0.07-0.62,0.07-0.62c1,0.07,1.53,1.06,1.53,1.06c0.89,1.57,2.34,1.11,2.91,0.85c0.09-0.66,0.35-1.11,0.63-1.37c-2.22-0.26-4.56-1.14-4.56-5.07c0-1.12,0.39-2.03,1.03-2.75c-0.1-0.26-0.45-1.3,0.1-2.71c0,0,0.84-0.28,2.75,1.05c0.8-0.23,1.65-0.34,2.5-0.34c0.85,0,1.7,0.12,2.5,0.34c1.91-1.33,2.75-1.05,2.75-1.05c0.55,1.41,0.2,2.45,0.1,2.71c0.64,0.72,1.03,1.63,1.03,2.75c0,3.94-2.34,4.81-4.57,5.06c0.36,0.32,0.68,0.94,0.68,1.9c0,1.37-0.01,2.48-0.01,2.81c0,0.27,0.18,0.59,0.69,0.49c3.97-1.36,6.83-5.2,6.83-9.73C22,6.59,17.52,2,12,2\" })))),\r\n    app.createElement(\"main\", { class: \"wrapper\" },\r\n        app.createElement(\"nav\", { class: \"side-nav\" },\r\n            app.createElement(\"button\", { id: \"toggleNavButton\" }, \"Menu\"),\r\n            app.createElement(\"ul\", null, sidebar.map(item => app.createElement(\"li\", null,\r\n                app.createElement(\"a\", { href: item.link }, item.text))))),\r\n        app.createElement(\"article\", { id: element })));\r\n"],"sourceRoot":""}